<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DocumentManager - Brackets API</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (145)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
              <li><a href="../../modules/file/NativeFileError.html">NativeFileError</a></li>
              <li><a href="../../modules/file/NativeFileSystem.html">NativeFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
              <li><a href="../../modules/preferences/PreferenceStorage.html">PreferenceStorage</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileIndexManager.html">FileIndexManager</a></li>
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/CollectionUtils.html">CollectionUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>DocumentManager</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>DocumentManager maintains a list of currently &#39;open&#39; Documents. It also owns the list of files in
the working set, and the notion of which Document is currently shown in the main editor UI area.</p>
<p>Document is the model for a file&#39;s contents; it dispatches events whenever those contents change.
To transiently inspect a file&#39;s content, simply get a Document and call getText() on it. However,
to be notified of Document changes or to modify a Document, you MUST call addRef() to ensure the
Document instance &#39;stays alive&#39; and is shared by all other who read/modify that file. (&#39;Open&#39;
Documents are all Documents that are &#39;kept alive&#39;, i.e. have ref count &gt; 0).</p>
<p>To get a Document, call getDocumentForPath(); never new up a Document yourself.</p>
<p>Secretly, a Document may use an Editor instance to act as the model for its internal state. (This
is unavoidable because CodeMirror does not separate its model from its UI). Documents are not
modifiable until they have a backing &#39;master Editor&#39;. Creation of the backing Editor is owned by
EditorManager. A Document only gets a backing Editor if it becomes the currentDocument, or if edits
occur in any Editor (inline or full-sized) bound to the Document; there is currently no other way
to ensure a Document is modifiable.</p>
<p>A non-modifiable Document may still dispatch change notifications, if the Document was changed
externally on disk.</p>
<p>Aside from the text content, Document tracks a few pieces of metadata - notably, whether there are
any unsaved changes.</p>
<p>This module dispatches several events:</p>
<ul>
<li>dirtyFlagChange -- When any Document&#39;s isDirty flag changes. The 2nd arg to the listener is the
Document whose flag changed.</li>
<li>documentSaved -- When a Document&#39;s changes have been saved. The 2nd arg to the listener is the
Document that has been saved.</li>
<li><p>documentRefreshed -- When a Document&#39;s contents have been reloaded from disk. The 2nd arg to the
listener is the Document that has been refreshed.</p>
</li>
<li><p>currentDocumentChange -- When the value of getCurrentDocument() changes. 2nd argument to the listener
is the current document and 3rd argument is the previous document.</p>
<p>To listen for working set changes, you must listen to <em>all</em> of these events:</p>
</li>
<li>workingSetAdd -- When a file is added to the working set (see getWorkingSet()). The 2nd arg
to the listener is the added File, and the 3rd arg is the index it was inserted at.</li>
<li>workingSetAddList -- When multiple files are added to the working set (e.g. project open, multiple file open).
The 2nd arg to the listener is the array of added File objects.</li>
<li>workingSetRemove -- When a file is removed from the working set (see getWorkingSet()). The
2nd arg to the listener is the removed File.</li>
<li>workingSetRemoveList -- When multiple files are removed from the working set (e.g. project close).
The 2nd arg to the listener is the array of removed File objects.</li>
<li><p>workingSetSort -- When the workingSet array is reordered without additions or removals.
Listener receives no arguments.</p>
</li>
<li><p>workingSetDisableAutoSorting -- Dispatched in addition to workingSetSort when the reorder was caused
by manual dragging and dropping. Listener receives no arguments.</p>
</li>
<li><p>fileNameChange -- When the name of a file or folder has changed. The 2nd arg is the old name.
The 3rd arg is the new name.</p>
</li>
<li>pathDeleted -- When a file or folder has been deleted. The 2nd arg is the path that was deleted.</li>
</ul>
<p>These are jQuery events, so to listen for them you do something like this:
   $(DocumentManager).on(&quot;eventname&quot;, handler);</p>
<p>Document objects themselves also dispatch some events - see Document docs for details.</p>
</div>
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;../modules/utils/Async.html">Async</a></li>
        <li><a href="..&#x2F;../modules/command/CommandManager.html">CommandManager</a></li>
        <li><a href="..&#x2F;../modules/command/Commands.html">Commands</a></li>
        <li><a href="..&#x2F;../modules/document/Document.html">Document</a></li>
        <li><a href="..&#x2F;../modules/editor/EditorManager.html">EditorManager</a></li>
        <li><a href="..&#x2F;../modules/project/FileSyncManager.html">FileSyncManager</a></li>
        <li><a href="..&#x2F;../modules/filesystem/FileSystem.html">FileSystem</a></li>
        <li><a href="..&#x2F;../modules/file/FileUtils.html">FileUtils</a></li>
        <li><a href="..&#x2F;../modules/document/InMemoryFile.html">InMemoryFile</a></li>
        <li><a href="..&#x2F;../modules/language/LanguageManager.html">LanguageManager</a></li>
        <li><a href="..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
        <li><a href="..&#x2F;../modules/utils/PerfUtils.html">PerfUtils</a></li>
        <li><a href="..&#x2F;../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
        <li><a href="..&#x2F;../modules/project/ProjectManager.html">ProjectManager</a></li>
        <li><a href="..&#x2F;../modules/strings.html">strings</a></li>
    </ul>

</section>
<section id="variables">
    
    <h3>Variables 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_currentDocument</h4>

    
<dl>
    <dt>See</dt>
    <dd><a href='#'>DocumentManager.getCurrentDocument()</a></dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _currentDocument = null;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_documentNavPending</h4>

    
<dl>
    <dt>Type</dt>
    <dd>boolean</dd>
    <dt>Private</dt>
</dl>
    <div class="description"><p>While true, the MRU order is frozen</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _documentNavPending = false;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_openDocuments</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Object.&lt;string, Document&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"><p>All documents with refCount &gt; 0. Maps Document.file.id -&gt; Document.</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _openDocuments = {};</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_untitledDocumentPath</h4>

    
<dl>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _untitledDocumentPath = &quot;&#x2F;_brackets_&quot; + _.random(10000000, 99999999);</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_workingSet</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;File&gt;</dd>
    <dt>See</dt>
    <dd><a href='#'>DocumentManager.getWorkingSet()</a></dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _workingSet = [];</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_workingSetAddedOrder</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;File&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _workingSetAddedOrder = [];</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_workingSetMRUOrder</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;File&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _workingSetMRUOrder = [];</code></pre></div>
</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_checkPreferencePrefix</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>key</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The key of the preference to be examined for migration of working set files.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">?string</dd>
    <dd>- the scope to which the preference is to be migrated</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _checkPreferencePrefix(key) {
        var pathPrefix = &quot;files_&quot;;
        if (key.indexOf(pathPrefix) === 0) {
            &#x2F;&#x2F; Get the project path from the old preference key by stripping &quot;files_&quot;.
            var projectPath = key.substr(pathPrefix.length);
            return &quot;user project.files &quot; + projectPath;
        }
        
        return null;
    }
    
    PreferencesManager.convertPreferences(module, {&quot;files_&quot;: &quot;user&quot;}, true, _checkPreferencePrefix);

    &#x2F;&#x2F; Handle file saves that may affect preferences
    $(exports).on(&quot;documentSaved&quot;, function (e, doc) {
        PreferencesManager.fileChanged(doc.file.fullPath);
    });
    
    &#x2F;&#x2F; For unit tests and internal use only
    exports._clearCurrentDocument       = _clearCurrentDocument;
    
    &#x2F;&#x2F; Define public API
    exports.Document                    = DocumentModule.Document;
    exports.getCurrentDocument          = getCurrentDocument;
    exports._clearCurrentDocument        = _clearCurrentDocument;
    exports.getDocumentForPath          = getDocumentForPath;
    exports.getOpenDocumentForPath      = getOpenDocumentForPath;
    exports.getDocumentText             = getDocumentText;
    exports.createUntitledDocument      = createUntitledDocument;
    exports.getWorkingSet               = getWorkingSet;
    exports.findInWorkingSet            = findInWorkingSet;
    exports.findInWorkingSetAddedOrder  = findInWorkingSetAddedOrder;
    exports.getAllOpenDocuments         = getAllOpenDocuments;
    exports.setCurrentDocument          = setCurrentDocument;
    exports.addToWorkingSet             = addToWorkingSet;
    exports.addListToWorkingSet         = addListToWorkingSet;
    exports.removeFromWorkingSet        = removeFromWorkingSet;
    exports.removeListFromWorkingSet    = removeListFromWorkingSet;
    exports.getNextPrevFile             = getNextPrevFile;
    exports.swapWorkingSetIndexes       = swapWorkingSetIndexes;
    exports.sortWorkingSet              = sortWorkingSet;
    exports.beginDocumentNavigation     = beginDocumentNavigation;
    exports.finalizeDocumentNavigation  = finalizeDocumentNavigation;
    exports.closeFullEditor             = closeFullEditor;
    exports.closeAll                    = closeAll;
    exports.notifyFileDeleted           = notifyFileDeleted;
    exports.notifyPathNameChanged       = notifyPathNameChanged;
    exports.notifyPathDeleted           = notifyPathDeleted;

    &#x2F;&#x2F; Performance measurements
    PerfUtils.createPerfMeasurement(&quot;DOCUMENT_MANAGER_GET_DOCUMENT_FOR_PATH&quot;, &quot;DocumentManager.getDocumentForPath()&quot;);

    &#x2F;&#x2F; Handle project change events
    var $ProjectManager = $(ProjectManager);
    $ProjectManager.on(&quot;projectOpen&quot;, _projectOpen);
    $ProjectManager.on(&quot;beforeProjectClose beforeAppClose&quot;, _savePreferences);
    
    &#x2F;&#x2F; Handle Language change events
    $(LanguageManager).on(&quot;languageAdded&quot;, _handleLanguageAdded);
    $(LanguageManager).on(&quot;languageModified&quot;, _handleLanguageModified);
});</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>_clearCurrentDocument</h4>

    
    <div class="description"><p>Changes currentDocument to null, causing no full Editor to be shown in the UI</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _clearCurrentDocument() {
        &#x2F;&#x2F; If editor already blank, do nothing
        if (!_currentDocument) {
            return;
        } else {
            &#x2F;&#x2F; Change model &amp; dispatch event
            var previousDocument = _currentDocument;
            _currentDocument = null;
            &#x2F;&#x2F; (this event triggers EditorManager to actually clear the editor UI)
            $(exports).triggerHandler(&quot;currentDocumentChange&quot;, [_currentDocument, previousDocument]);
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_gcDocuments</h4>

    
    <div class="description"><p>Cleans up any loose Documents whose only ref is its own master Editor, and that Editor is not
rooted in the UI anywhere. This can happen if the Editor is auto-created via Document APIs that
trigger _ensureMasterEditor() without making it dirty. E.g. a command invoked on the focused
inline editor makes no-op edits or does a read-only operation.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _gcDocuments() {
        getAllOpenDocuments().forEach(function (doc) {
            &#x2F;&#x2F; Is the only ref to this document its own master Editor?
            if (doc._refCount === 1 &amp;&amp; doc._masterEditor) {
                &#x2F;&#x2F; Destroy the Editor if it&#39;s not being kept alive by the UI
                EditorManager._destroyEditorIfUnneeded(doc);
            }
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleLanguageAdded</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleLanguageAdded(event, language) {
        _.forEach(_openDocuments, function (doc, key) {
            &#x2F;&#x2F; No need to look at the new language if this document has one already
            if (doc.getLanguage().isFallbackLanguage()) {
                doc._updateLanguage();
            }
        });
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleLanguageModified</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleLanguageModified(event, language) {
        _.forEach(_openDocuments, function (doc, key) {
            var docLanguage = doc.getLanguage();
            &#x2F;&#x2F; A modified language can affect a document
            &#x2F;&#x2F; - if its language was modified
            &#x2F;&#x2F; - if the document doesn&#39;t have a language yet and its file extension was added to the modified language
            if (docLanguage === language || docLanguage.isFallbackLanguage()) {
                doc._updateLanguage();
            }
        });
    }
    
    &#x2F;&#x2F; For compatibility
    $(DocumentModule)
        .on(&quot;_afterDocumentCreate&quot;, function (event, doc) {
            if (_openDocuments[doc.file.id]) {
                console.error(&quot;Document for this path already in _openDocuments!&quot;);
                return true;
            }

            _openDocuments[doc.file.id] = doc;
            $(exports).triggerHandler(&quot;afterDocumentCreate&quot;, doc);
        })
        .on(&quot;_beforeDocumentDelete&quot;, function (event, doc) {
            if (!_openDocuments[doc.file.id]) {
                console.error(&quot;Document with references was not in _openDocuments!&quot;);
                return true;
            }

            $(exports).triggerHandler(&quot;beforeDocumentDelete&quot;, doc);
            delete _openDocuments[doc.file.id];
        })
        .on(&quot;_documentRefreshed&quot;, function (event, doc) {
            $(exports).triggerHandler(&quot;documentRefreshed&quot;, doc);
        })
        .on(&quot;_dirtyFlagChange&quot;, function (event, doc) {
            $(exports).triggerHandler(&quot;dirtyFlagChange&quot;, doc);
            if (doc.isDirty) {
                addToWorkingSet(doc.file);
            }
        })
        .on(&quot;_documentSaved&quot;, function (event, doc) {
            $(exports).triggerHandler(&quot;documentSaved&quot;, doc);
        });</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_markMostRecent</h4>

    
    <div class="description"><p>Moves document to the front of the MRU list, IF it&#39;s in the working set; no-op otherwise.</p>
</div>
    
<dl>
    <dt></dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">Document</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _markMostRecent(doc) {
        var mruI = findInWorkingSet(doc.file.fullPath, _workingSetMRUOrder);
        if (mruI !== -1) {
            _workingSetMRUOrder.splice(mruI, 1);
            _workingSetMRUOrder.unshift(doc.file);
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_projectOpen</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _projectOpen(e) {
        &#x2F;&#x2F; file root is appended for each project
        var projectRoot = ProjectManager.getProjectRoot(),
            files = [],
            context = { location : { scope: &quot;user&quot;,
                                     layer: &quot;project&quot; } };
        
        files = PreferencesManager.getViewState(&quot;project.files&quot;, context);
        
        console.assert(Object.keys(_openDocuments).length === 0);  &#x2F;&#x2F; no files leftover from prev proj

        if (!files) {
            return;
        }

        var filesToOpen = [],
            viewStates = {},
            activeFile;

        &#x2F;&#x2F; Add all files to the working set without verifying that
        &#x2F;&#x2F; they still exist on disk (for faster project switching)
        files.forEach(function (value, index) {
            filesToOpen.push(FileSystem.getFileForPath(value.file));
            if (value.active) {
                activeFile = value.file;
            }
            if (value.viewState) {
                viewStates[value.file] = value.viewState;
            }
        });
        addListToWorkingSet(filesToOpen);
        
        &#x2F;&#x2F; Allow for restoring saved editor UI state
        EditorManager._resetViewStates(viewStates);

        &#x2F;&#x2F; Initialize the active editor
        if (!activeFile &amp;&amp; _workingSet.length &gt; 0) {
            activeFile = _workingSet[0].fullPath;
        }

        if (activeFile) {
            var promise = CommandManager.execute(Commands.FILE_OPEN, { fullPath: activeFile });
            &#x2F;&#x2F; Add this promise to the event&#39;s promises to signal that this handler isn&#39;t done yet
            e.promises.push(promise);
        }
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_removeAllFromWorkingSet</h4>

    
    <div class="description"><p>Removes all files from the working set list.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _removeAllFromWorkingSet() {
        var fileList = _workingSet;

        &#x2F;&#x2F; Remove all
        _workingSet = [];
        _workingSetMRUOrder = [];
        _workingSetAddedOrder = [];

        &#x2F;&#x2F; Dispatch event
        $(exports).triggerHandler(&quot;workingSetRemoveList&quot;, [fileList]);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_savePreferences</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _savePreferences() {
        &#x2F;&#x2F; save the working set file paths
        var files        = [],
            isActive     = false,
            workingSet   = getWorkingSet(),
            currentDoc   = getCurrentDocument(),
            projectRoot  = ProjectManager.getProjectRoot(),
            context      = { location : { scope: &quot;user&quot;,
                                          layer: &quot;project&quot;,
                                          layerID: projectRoot.fullPath } };

        if (!projectRoot) {
            return;
        }

        workingSet.forEach(function (file, index) {
            &#x2F;&#x2F; Do not persist untitled document paths
            if (!(file instanceof InMemoryFile)) {
                &#x2F;&#x2F; flag the currently active editor
                isActive = currentDoc &amp;&amp; (file.fullPath === currentDoc.file.fullPath);
                
                &#x2F;&#x2F; save editor UI state for just the working set
                var viewState = EditorManager._getViewState(file.fullPath);
                
                files.push({
                    file: file.fullPath,
                    active: isActive,
                    viewState: viewState
                });
            }
        });

        &#x2F;&#x2F; Writing out working set files using the project layer specified in &#39;context&#39;.
        PreferencesManager.setViewState(&quot;project.files&quot;, files, context);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>addListToWorkingSet</h4>

    
    <div class="description"><p>Adds the given file list to the end of the working set list.
If a file in the list has its own custom viewer, then it 
is not added into the working set.
Does not change which document is currently open in the editor.
More efficient than calling addToWorkingSet() (in a loop) for
a list of files because there&#39;s only 1 redraw at the end</p>
</div>
    
<dl>
    <dt>fileList</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">Array.&lt;File&gt;</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addListToWorkingSet(fileList) {
        var uniqueFileList = [];

        &#x2F;&#x2F; Process only files not already in working set
        fileList.forEach(function (file, index) {
            &#x2F;&#x2F; If doc has a custom viewer, then don&#39;t add it to the working set.
            &#x2F;&#x2F; Or if doc is already in working set, don&#39;t add it again.
            if (!EditorManager.getCustomViewerForPath(file.fullPath) &amp;&amp;
                    findInWorkingSet(file.fullPath) === -1) {
                uniqueFileList.push(file);

                &#x2F;&#x2F; Add
                _workingSet.push(file);

                &#x2F;&#x2F; Add to MRU order: either first or last, depending on whether it&#39;s already the current doc or not
                if (_currentDocument &amp;&amp; _currentDocument.file.fullPath === file.fullPath) {
                    _workingSetMRUOrder.unshift(file);
                } else {
                    _workingSetMRUOrder.push(file);
                }
                
                &#x2F;&#x2F; Add first to Added order
                _workingSetAddedOrder.splice(index, 1, file);
            }
        });
        

        &#x2F;&#x2F; Dispatch event
        $(exports).triggerHandler(&quot;workingSetAddList&quot;, [uniqueFileList]);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>addToWorkingSet</h4>

    
    <div class="description"><p>Adds the given file to the end of the working set list, if it is not already in the list
and it does not have a custom viewer.
Does not change which document is currently open in the editor. Completes synchronously.</p>
</div>
    
<dl>
    <dt>file</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">File</dd>
    <dd></dd>
    <dt>index</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">number</dd>
    <dd>Position to add to list (defaults to last); -1 is ignored</dd>
    <dt>forceRedraw</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>If true, a working set change notification is always sent (useful if suppressRedraw was used with removeFromWorkingSet() earlier)</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addToWorkingSet(file, index, forceRedraw) {
        var indexRequested = (index !== undefined &amp;&amp; index !== null &amp;&amp; index !== -1);
        
        &#x2F;&#x2F; If the file has a custom viewer, then don&#39;t add it to the working set.
        if (EditorManager.getCustomViewerForPath(file.fullPath)) {
            return;
        }
            
        &#x2F;&#x2F; If doc is already in working set, don&#39;t add it again
        var curIndex = findInWorkingSet(file.fullPath);
        if (curIndex !== -1) {
            &#x2F;&#x2F; File is in working set, but not at the specifically requested index - only need to reorder
            if (forceRedraw || (indexRequested &amp;&amp; curIndex !== index)) {
                var entry = _workingSet.splice(curIndex, 1)[0];
                _workingSet.splice(index, 0, entry);
                $(exports).triggerHandler(&quot;workingSetSort&quot;);
            }
            return;
        }

        if (!indexRequested) {
            &#x2F;&#x2F; If no index is specified, just add the file to the end of the working set.
            _workingSet.push(file);
        } else {
            &#x2F;&#x2F; If specified, insert into the working set list at this 0-based index
            _workingSet.splice(index, 0, file);
        }
        
        &#x2F;&#x2F; Add to MRU order: either first or last, depending on whether it&#39;s already the current doc or not
        if (_currentDocument &amp;&amp; _currentDocument.file.fullPath === file.fullPath) {
            _workingSetMRUOrder.unshift(file);
        } else {
            _workingSetMRUOrder.push(file);
        }
        
        &#x2F;&#x2F; Add first to Added order
        _workingSetAddedOrder.unshift(file);
        
        &#x2F;&#x2F; Dispatch event
        if (!indexRequested) {
            index = _workingSet.length - 1;
        }
        $(exports).triggerHandler(&quot;workingSetAdd&quot;, [file, index]);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>beginDocumentNavigation</h4>

    
    <div class="description"><p>Indicate that changes to currentDocument are temporary for now, and should not update the MRU
ordering of the working set. Useful for next/previous keyboard navigation (until Ctrl is released)
or for incremental-search style document preview like Quick Open will eventually have.
Can be called any number of times, and ended by a single finalizeDocumentNavigation() call.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function beginDocumentNavigation() {
        _documentNavPending = true;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>closeAll</h4>

    
    <div class="description"><p>Equivalent to calling closeFullEditor() for all Documents. Same caveat: this discards any
unsaved changes, so the UI should confirm with the user before calling this.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function closeAll() {
        _clearCurrentDocument();
        _removeAllFromWorkingSet();
    }
        
    function removeListFromWorkingSet(list, clearCurrentDocument) {
        var fileList = [], index;
        
        if (!list) {
            return;
        }
        
        if (clearCurrentDocument) {
            _clearCurrentDocument();
        }
        
        list.forEach(function (file) {
            index = findInWorkingSet(file.fullPath);
            
            if (index !== -1) {
                fileList.push(_workingSet[index]);
                
                _workingSet.splice(index, 1);
                _workingSetMRUOrder.splice(findInWorkingSet(file.fullPath, _workingSetMRUOrder), 1);
                _workingSetAddedOrder.splice(findInWorkingSet(file.fullPath, _workingSetAddedOrder), 1);
            }
        });
        
        $(exports).triggerHandler(&quot;workingSetRemoveList&quot;, [fileList]);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>closeFullEditor</h4>

    
    <div class="description"><p>Warning: low level API - use FILE_CLOSE command in most cases.
Closes the full editor for the given file (if there is one), and removes it from the working
set. Any other editors for this Document remain open. Discards any unsaved changes without prompting.</p>
<p>Changes currentDocument if this file was the current document (may change to null).</p>
<p>This is a subset of notifyFileDeleted(). Use this for the user-facing Close command.</p>
</div>
    
<dl>
    <dt>file</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">File</dd>
    <dd></dd>
    <dt>skipAutoSelect</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>- if true, don't automatically open and select the next document</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function closeFullEditor(file, skipAutoSelect) {
        &#x2F;&#x2F; If this was the current document shown in the editor UI, we&#39;re going to switch to a
        &#x2F;&#x2F; different document (or none if working set has no other options)
        if (_currentDocument &amp;&amp; _currentDocument.file.fullPath === file.fullPath) {
            &#x2F;&#x2F; Get next most recent doc in the MRU order
            var nextFile = getNextPrevFile(1);
            if (nextFile &amp;&amp; nextFile.fullPath === _currentDocument.file.fullPath) {
                &#x2F;&#x2F; getNextPrevFile() might return the file we&#39;re about to close if it&#39;s the only one open (due to wraparound)
                nextFile = null;
            }
            
            &#x2F;&#x2F; Switch editor to next document (or blank it out)
            if (nextFile &amp;&amp; !skipAutoSelect) {
                CommandManager.execute(Commands.FILE_OPEN, { fullPath: nextFile.fullPath })
                    .done(function () {
                        &#x2F;&#x2F; (Now we&#39;re guaranteed that the current document is not the one we&#39;re closing)
                        console.assert(!(_currentDocument &amp;&amp; _currentDocument.file.fullPath === file.fullPath));
                    })
                    .fail(function () {
                        &#x2F;&#x2F; File chosen to be switched to could not be opened, and the original file
                        &#x2F;&#x2F; is still in editor. Close it again so code will try to open the next file,
                        &#x2F;&#x2F; or empty the editor if there are no other files.
                        closeFullEditor(file);
                    });
            } else {
                _clearCurrentDocument();
            }
        }
        
        &#x2F;&#x2F; Remove closed doc from working set, if it was in there
        &#x2F;&#x2F; This happens regardless of whether the document being closed was the current one or not
        removeFromWorkingSet(file);
        
        &#x2F;&#x2F; Note: EditorManager will dispose the closed document&#39;s now-unneeded editor either in
        &#x2F;&#x2F; response to the editor-swap call above, or the removeFromWorkingSet() call, depending on
        &#x2F;&#x2F; circumstances. See notes in EditorManager for more.
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>createUntitledDocument</h4>

    
    <div class="description"><p>Creates an untitled document. The associated File has a fullPath that
looks like /some-random-string/Untitled-counter.fileExt.</p>
</div>
    
<dl>
    <dt>counter</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>- used in the name of the new Document's File</dd>
    <dt>fileExt</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>- file extension of the new Document's File, including "."</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">Document</dd>
    <dd>- a new untitled Document</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function createUntitledDocument(counter, fileExt) {
        var filename = Strings.UNTITLED + &quot;-&quot; + counter + fileExt,
            fullPath = _untitledDocumentPath + &quot;&#x2F;&quot; + filename,
            now = new Date(),
            file = new InMemoryFile(fullPath, FileSystem);
        
        return new DocumentModule.Document(file, now, &quot;&quot;);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>finalizeDocumentNavigation</h4>

    
    <div class="description"><p>Un-freezes the MRU list after one or more beginDocumentNavigation() calls. Whatever document is
current is bumped to the front of the MRU list.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function finalizeDocumentNavigation() {
        if (_documentNavPending) {
            _documentNavPending = false;
            
            _markMostRecent(_currentDocument);
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>findInWorkingSet</h4>

    
    <div class="description"><p>Returns the index of the file matching fullPath in the working set.
Returns -1 if not found.</p>
</div>
    
<dl>
    <dt>fullPath</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd></dd>
    <dt>list</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">Array.&lt;File&gt;</dd>
    <dd>Pass this arg to search a different array of files. Internal use only.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>index</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function findInWorkingSet(fullPath, list) {
        list = list || _workingSet;
        
        return _.findIndex(list, function (file, i) {
            return file.fullPath === fullPath;
        });
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>findInWorkingSetAddedOrder</h4>

    
    <div class="description"><p>Returns the index of the file matching fullPath in _workingSetAddedOrder.
Returns -1 if not found.</p>
</div>
    
<dl>
    <dt>fullPath</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>index</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function findInWorkingSetAddedOrder(fullPath) {
        return findInWorkingSet(fullPath, _workingSetAddedOrder);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getAllOpenDocuments</h4>

    
    <div class="description"><p>Returns all Documents that are &#39;open&#39; in the UI somewhere (for now, this means open in an
inline editor and/or a full-size editor). Only these Documents can be modified, and only
these Documents are synced with external changes on disk.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">Array.&lt;Document&gt;</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getAllOpenDocuments() {
        var result = [];
        var id;
        for (id in _openDocuments) {
            if (_openDocuments.hasOwnProperty(id)) {
                result.push(_openDocuments[id]);
            }
        }
        return result;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getCurrentDocument</h4>

    
    <div class="description"><p>Returns the Document that is currently open in the editor UI. May be null.
When this changes, DocumentManager dispatches a &quot;currentDocumentChange&quot; event. The current
document always has a backing Editor (Document._masterEditor != null) and is thus modifiable.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">?Document</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getCurrentDocument() {
        return _currentDocument;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getDocumentForPath</h4>

    
    <div class="description"><p>Gets an existing open Document for the given file, or creates a new one if the Document is
not currently open (&#39;open&#39; means referenced by the UI somewhere). Always use this method to
get Documents; do not call the Document constructor directly. This method is safe to call
in parallel.</p>
<p>If you are going to hang onto the Document for more than just the duration of a command - e.g.
if you are going to display its contents in a piece of UI - then you must addRef() the Document
and listen for changes on it. (Note: opening the Document in an Editor automatically manages
refs and listeners for that Editor UI).</p>
<p>If all you need is the Document&#39;s getText() value, use the faster getDocumentText() instead.</p>
</div>
    
<dl>
    <dt>fullPath</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">$.Promise</dd>
    <dd>A promise object that will be resolved with the Document, or rejected with a FileSystemError if the file is not yet open and can't be read from disk.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getDocumentForPath(fullPath) {
        var doc = getOpenDocumentForPath(fullPath);

        if (doc) {
            &#x2F;&#x2F; use existing document
            return new $.Deferred().resolve(doc).promise();
        } else {
            
            &#x2F;&#x2F; Should never get here if the fullPath refers to an Untitled document
            if (fullPath.indexOf(_untitledDocumentPath) === 0) {
                console.error(&quot;getDocumentForPath called for non-open untitled document: &quot; + fullPath);
                return new $.Deferred().reject().promise();
            }
            
            var file            = FileSystem.getFileForPath(fullPath),
                pendingPromise  = getDocumentForPath._pendingDocumentPromises[file.id];
            
            if (pendingPromise) {
                &#x2F;&#x2F; wait for the result of a previous request
                return pendingPromise;
            } else {
                var result = new $.Deferred(),
                    promise = result.promise();
                
                &#x2F;&#x2F; log this document&#39;s Promise as pending
                getDocumentForPath._pendingDocumentPromises[file.id] = promise;
    
                &#x2F;&#x2F; create a new document
                var perfTimerName = PerfUtils.markStart(&quot;getDocumentForPath:\t&quot; + fullPath);
    
                result.done(function () {
                    PerfUtils.addMeasurement(perfTimerName);
                }).fail(function () {
                    PerfUtils.finalizeMeasurement(perfTimerName);
                });
    
                FileUtils.readAsText(file)
                    .always(function () {
                        &#x2F;&#x2F; document is no longer pending
                        delete getDocumentForPath._pendingDocumentPromises[file.id];
                    })
                    .done(function (rawText, readTimestamp) {
                        doc = new DocumentModule.Document(file, readTimestamp, rawText);
                                
                        &#x2F;&#x2F; This is a good point to clean up any old dangling Documents
                        _gcDocuments();
                        
                        result.resolve(doc);
                    })
                    .fail(function (fileError) {
                        result.reject(fileError);
                    });
                
                return promise;
            }
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getDocumentText</h4>

    
    <div class="description"><p>Gets the text of a Document (including any unsaved changes), or would-be Document if the
file is not actually open. More efficient than getDocumentForPath(). Use when you&#39;re reading
document(s) but don&#39;t need to hang onto a Document object.</p>
<p>If the file is open this is equivalent to calling getOpenDocumentForPath().getText(). If the
file is NOT open, this is like calling getDocumentForPath()...getText() but more efficient.
Differs from plain FileUtils.readAsText() in two ways: (a) line endings are still normalized
as in Document.getText(); (b) unsaved changes are returned if there are any.</p>
</div>
    
<dl>
    <dt>file</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">File</dd>
    <dd>The file to get the text for.</dd>
    <dt>checkLineEndings</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Whether to return line ending information. Default false (slightly more efficient).</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">$.Promise</dd>
    <dd>A promise that is resolved with three parameters: contents - string: the document's text timestamp - Date: the last time the document was changed on disk (might not be the same as the last time it was changed in memory) lineEndings - string: the original line endings of the file, one of the FileUtils.LINE_ENDINGS_* constants; will be null if checkLineEndings was false. or rejected with a filesystem error.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getDocumentText(file, checkLineEndings) {
        var result = new $.Deferred(),
            doc = getOpenDocumentForPath(file.fullPath);
        if (doc) {
            result.resolve(doc.getText(), doc.diskTimestamp, checkLineEndings ? doc._lineEndings : null);
        } else {
            file.read(function (err, contents, stat) {
                if (err) {
                    result.reject(err);
                } else {
                    &#x2F;&#x2F; Normalize line endings the same way Document would, but don&#39;t actually
                    &#x2F;&#x2F; new up a Document (which entails a bunch of object churn).
                    var originalLineEndings = checkLineEndings ? FileUtils.sniffLineEndings(contents) : null;
                    contents = DocumentModule.Document.normalizeText(contents);
                    result.resolve(contents, stat.mtime, originalLineEndings);
                }
            });
        }
        return result.promise();
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getNextPrevFile</h4>

    
    <div class="description"><p>Get the next or previous file in the working set, in MRU order (relative to currentDocument). May
return currentDocument itself if working set is length 1.</p>
</div>
    
<dl>
    <dt>inc</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>-1 for previous, +1 for next; no other values allowed</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">?File</dd>
    <dd>null if working set empty</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getNextPrevFile(inc) {
        if (inc !== -1 &amp;&amp; inc !== +1) {
            console.error(&quot;Illegal argument: inc = &quot; + inc);
            return null;
        }
        
        if (EditorManager.getCurrentlyViewedPath()) {
            var mruI = findInWorkingSet(EditorManager.getCurrentlyViewedPath(), _workingSetMRUOrder);
            if (mruI === -1) {
                &#x2F;&#x2F; If doc not in working set, return most recent working set item
                if (_workingSetMRUOrder.length &gt; 0) {
                    return _workingSetMRUOrder[0];
                }
            } else {
                &#x2F;&#x2F; If doc is in working set, return next&#x2F;prev item with wrap-around
                var newI = mruI + inc;
                if (newI &gt;= _workingSetMRUOrder.length) {
                    newI = 0;
                } else if (newI &lt; 0) {
                    newI = _workingSetMRUOrder.length - 1;
                }
                
                return _workingSetMRUOrder[newI];
            }
        }
        
        &#x2F;&#x2F; If no doc open or working set empty, there is no &quot;next&quot; file
        return null;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getOpenDocumentForPath</h4>

    
    <div class="description"><p>Returns the existing open Document for the given file, or null if the file is not open (&#39;open&#39;
means referenced by the UI somewhere). If you will hang onto the Document, you must addRef()
it; see {@link getDocumentForPath()} for details.</p>
</div>
    
<dl>
    <dt>fullPath</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">?Document</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getOpenDocumentForPath(fullPath) {
        var id;
        
        &#x2F;&#x2F; Need to walk all open documents and check for matching path. We can&#39;t
        &#x2F;&#x2F; use getFileForPath(fullPath).id since the file it returns won&#39;t match
        &#x2F;&#x2F; an Untitled document&#39;s InMemoryFile.
        for (id in _openDocuments) {
            if (_openDocuments.hasOwnProperty(id)) {
                if (_openDocuments[id].file.fullPath === fullPath) {
                    return _openDocuments[id];
                }
            }
        }
        return null;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getWorkingSet</h4>

    
    <div class="description"><p>Returns a list of items in the working set in UI list order. May be 0-length, but never null.</p>
<p>When a file is added this list, DocumentManager dispatches a &quot;workingSetAdd&quot; event.
When a file is removed from list, DocumentManager dispatches a &quot;workingSetRemove&quot; event.
To listen for ALL changes to this list, you must listen for both events.</p>
<p>Which items belong in the working set is managed entirely by DocumentManager. Callers cannot
(yet) change this collection on their own.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">Array.&lt;File&gt;</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getWorkingSet() {
        return _.clone(_workingSet);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>notifyFileDeleted</h4>

    
    <div class="description"><p>Reacts to a file being deleted: if there is a Document for this file, causes it to dispatch a
&quot;deleted&quot; event; ensures it&#39;s not the currentDocument; and removes this file from the working
set. These actions in turn cause all open editors for this file to close. Discards any unsaved
changes - it is expected that the UI has already confirmed with the user before calling.</p>
<p>To simply close a main editor when the file hasn&#39;t been deleted, use closeFullEditor() or FILE_CLOSE.</p>
<p>FUTURE: Instead of an explicit notify, we should eventually listen for deletion events on some
sort of &quot;project file model,&quot; making this just a private event handler.</p>
</div>
    
<dl>
    <dt>file</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">File</dd>
    <dd></dd>
    <dt>skipAutoSelect</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>- if true, don't automatically open/select the next document</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function notifyFileDeleted(file, skipAutoSelect) {
        &#x2F;&#x2F; First ensure it&#39;s not currentDocument, and remove from working set
        closeFullEditor(file, skipAutoSelect);
        
        &#x2F;&#x2F; Notify all other editors to close as well
        var doc = getOpenDocumentForPath(file.fullPath);
        if (doc) {
            $(doc).triggerHandler(&quot;deleted&quot;);
        }
        
        &#x2F;&#x2F; At this point, all those other views SHOULD have released the Doc
        if (doc &amp;&amp; doc._refCount &gt; 0) {
            console.log(&quot;WARNING: deleted Document still has &quot; + doc._refCount + &quot; references. Did someone addRef() without listening for &#39;deleted&#39;?&quot;);
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>notifyPathDeleted</h4>

    
    <div class="description"><p>Called after a file or folder has been deleted. This function is responsible
for updating underlying model data and notifying all views of the change.</p>
</div>
    
<dl>
    <dt>path</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The path of the file/folder that has been deleted</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function notifyPathDeleted(path) {</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>notifyPathNameChanged</h4>

    
    <div class="description"><p>Called after a file or folder name has changed. This function is responsible
for updating underlying model data and notifying all views of the change.</p>
</div>
    
<dl>
    <dt>oldName</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The old name of the file/folder</dd>
    <dt>newName</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The new name of the file/folder</dd>
    <dt>isFolder</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>True if path is a folder; False if it is a file.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function notifyPathNameChanged(oldName, newName, isFolder) {
        &#x2F;&#x2F; Notify all open documents 
        _.forEach(_openDocuments, function (doc, id) {
            &#x2F;&#x2F; TODO: Only notify affected documents? For now _notifyFilePathChange 
            &#x2F;&#x2F; just updates the language if the extension changed, so it&#39;s fine
            &#x2F;&#x2F; to call for all open docs.
            doc._notifyFilePathChanged();
        });
        
        &#x2F;&#x2F; Send a &quot;fileNameChanged&quot; event. This will trigger the views to update.
        $(exports).triggerHandler(&quot;fileNameChange&quot;, [oldName, newName]);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>removeFromWorkingSet</h4>

    
    <div class="description"><p>Warning: low level API - use FILE_CLOSE command in most cases.
Removes the given file from the working set list, if it was in the list. Does not change
the current editor even if it&#39;s for this file. Does not prompt for unsaved changes.</p>
</div>
    
<dl>
    <dt>file</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">File</dd>
    <dd></dd>
    <dt>true</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>to suppress redraw after removal</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function removeFromWorkingSet(file, suppressRedraw) {
        &#x2F;&#x2F; If doc isn&#39;t in working set, do nothing
        var index = findInWorkingSet(file.fullPath);
        if (index === -1) {
            return;
        }
        
        &#x2F;&#x2F; Remove
        _workingSet.splice(index, 1);
        _workingSetMRUOrder.splice(findInWorkingSet(file.fullPath, _workingSetMRUOrder), 1);
        _workingSetAddedOrder.splice(findInWorkingSet(file.fullPath, _workingSetAddedOrder), 1);
        
        &#x2F;&#x2F; Dispatch event
        $(exports).triggerHandler(&quot;workingSetRemove&quot;, [file, suppressRedraw]);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>setCurrentDocument</h4>

    
    <div class="description"><p>Changes currentDocument to the given Document, firing currentDocumentChange, which in turn
causes this Document&#39;s main editor UI to be shown in the editor pane, updates the selection
in the file tree / working set UI, etc. This call may also add the item to the working set.</p>
</div>
    
<dl>
    <dt>document</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">Document</dd>
    <dd>The Document to make current. May or may not already be in the working set.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function setCurrentDocument(doc) {
        
        &#x2F;&#x2F; If this doc is already current, do nothing
        if (_currentDocument === doc) {
            return;
        }

        var perfTimerName = PerfUtils.markStart(&quot;setCurrentDocument:\t&quot; + doc.file.fullPath);
        
        &#x2F;&#x2F; If file is untitled or otherwise not within project tree, add it to
        &#x2F;&#x2F; working set right now (don&#39;t wait for it to become dirty)
        if (doc.isUntitled() || !ProjectManager.isWithinProject(doc.file.fullPath)) {
            addToWorkingSet(doc.file);
        }
        
        &#x2F;&#x2F; Adjust MRU working set ordering (except while in the middle of a Ctrl+Tab sequence)
        if (!_documentNavPending) {
            _markMostRecent(doc);
        }
        
        &#x2F;&#x2F; Make it the current document
        var previousDocument = _currentDocument;
        _currentDocument = doc;
        $(exports).triggerHandler(&quot;currentDocumentChange&quot;, [_currentDocument, previousDocument]);
        &#x2F;&#x2F; (this event triggers EditorManager to actually switch editors in the UI)
        
        PerfUtils.addMeasurement(perfTimerName);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>sortWorkingSet</h4>

    
    <div class="description"><p>Sorts _workingSet using the compare function</p>
</div>
    
<dl>
    <dt>compareFn</dt>
    <dd class="label label-info pull-left">function(File,File): number</dd>
    <dd>The function that will be used inside JavaScript's sort function. The return a value should be >0 (sort a to a lower index than b), =0 (leaves a and b unchanged with respect to each other) or <0 (sort b to a lower index than a) and must always returns the same value when given a specific pair of elements a and b as its two arguments. Documentation: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function sortWorkingSet(compareFn) {
        _workingSet.sort(compareFn);
        $(exports).triggerHandler(&quot;workingSetSort&quot;);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>swapWorkingSetIndexes</h4>

    
    <div class="description"><p>Mutually exchanges the files at the indexes passed by parameters.</p>
</div>
    
<dl>
    <dt>index</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Old file index</dd>
    <dt>index</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>New file index</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function swapWorkingSetIndexes(index1, index2) {
        var length = _workingSet.length - 1;
        var temp;
        
        if (index1 &gt;= 0 &amp;&amp; index2 &lt;= length &amp;&amp; index1 &gt;= 0 &amp;&amp; index2 &lt;= length) {
            temp = _workingSet[index1];
            _workingSet[index1] = _workingSet[index2];
            _workingSet[index2] = temp;
            
            $(exports).triggerHandler(&quot;workingSetSort&quot;);
            $(exports).triggerHandler(&quot;workingSetDisableAutoSorting&quot;);
        }
    }</code></pre></div>
</section>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>