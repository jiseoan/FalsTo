<!DOCTYPE html>
<html lang="en">
  <head>
    <title>KeyBindingManager - Brackets API</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (145)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
              <li><a href="../../modules/file/NativeFileError.html">NativeFileError</a></li>
              <li><a href="../../modules/file/NativeFileSystem.html">NativeFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
              <li><a href="../../modules/preferences/PreferenceStorage.html">PreferenceStorage</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileIndexManager.html">FileIndexManager</a></li>
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/CollectionUtils.html">CollectionUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>KeyBindingManager</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>Manages the mapping of keyboard inputs to commands.</p>
</div>
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;../modules/utils/AppInit.html">AppInit</a></li>
        <li><a href="..&#x2F;../modules/command/CommandManager.html">CommandManager</a></li>
        <li><a href="..&#x2F;../modules/utils/Global.html">Global</a></li>
        <li><a href="..&#x2F;../modules/text!base-config/keyboard.json.html">keyboard.json</a></li>
        <li><a href="..&#x2F;../modules/utils/KeyEvent.html">KeyEvent</a></li>
        <li><a href="..&#x2F;../modules/strings.html">strings</a></li>
    </ul>

</section>
<section id="variables">
    
    <h3>Variables 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_commandMap</h4>

    
<dl>
    <dt>Type</dt>
    <dd>!Object.&lt;string, Array.&lt;{key: string, displayKey: string}&gt;&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _commandMap = {};</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_enabled</h4>

    
<dl>
    <dt>Type</dt>
    <dd>boolean</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _enabled = true;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_globalKeydownHooks</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;function(Event): boolean&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _globalKeydownHooks = [];</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_keyMap</h4>

    
<dl>
    <dt>Type</dt>
    <dd>!Object.&lt;string, {commandID: string, key: string, displayKey: string}&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _keyMap = {};</code></pre></div>
</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_addBinding</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>commandID</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd></dd>
    <dt>keyBinding</dt>
    <dd class="label label-info pull-left">string,{{key: string,displayKey: string}}</dd>
    <dd>- a single shortcut.</dd>
    <dt>platform</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>- "all" indicates all platforms, not overridable - undefined indicates all platforms, overridden by platform-specific binding</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">?{key: string,displayKey:String}</dd>
    <dd>Returns a record for valid key bindings. Returns null when key binding platform does not match, binding does not normalize, or is already assigned.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _addBinding(commandID, keyBinding, platform) {
        var key,
            result = null,
            normalized,
            normalizedDisplay,
            explicitPlatform = keyBinding.platform || platform,
            targetPlatform,
            command,
            bindingsToDelete = [],
            existing;

        &#x2F;&#x2F; For platform: &quot;all&quot;, use explicit current plaform
        if (explicitPlatform &amp;&amp; explicitPlatform !== &quot;all&quot;) {
            targetPlatform = explicitPlatform;
        } else {
            targetPlatform = brackets.platform;
        }
        
        &#x2F;&#x2F; if the request does not specify an explicit platform, and we&#39;re
        &#x2F;&#x2F; currently on a mac, then replace Ctrl with Cmd.
        key = (keyBinding.key) || keyBinding;
        if (brackets.platform === &quot;mac&quot; &amp;&amp; (explicitPlatform === undefined || explicitPlatform === &quot;all&quot;)) {
            key = key.replace(&quot;Ctrl&quot;, &quot;Cmd&quot;);
            if (keyBinding.displayKey !== undefined) {
                keyBinding.displayKey = keyBinding.displayKey.replace(&quot;Ctrl&quot;, &quot;Cmd&quot;);
            }
        }
        normalized = normalizeKeyDescriptorString(key);
        
        &#x2F;&#x2F; skip if the key binding is invalid 
        if (!normalized) {
            console.error(&quot;Unable to parse key binding &quot; + key + &quot;. Permitted modifiers: Ctrl, Cmd, Alt, Opt, Shift; separated by &#39;-&#39; (not &#39;+&#39;).&quot;);
            return null;
        }
        
        &#x2F;&#x2F; check for duplicate key bindings
        existing = _keyMap[normalized];
        
        &#x2F;&#x2F; for cross-platform compatibility
        if (exports.useWindowsCompatibleBindings) {
            &#x2F;&#x2F; windows-only key bindings are used as the default binding
            &#x2F;&#x2F; only if a default binding wasn&#39;t already defined
            if (explicitPlatform === &quot;win&quot;) {
                &#x2F;&#x2F; search for a generic or platform-specific binding if it
                &#x2F;&#x2F; already exists
                if (existing &amp;&amp; (!existing.explicitPlatform ||
                                 existing.explicitPlatform === brackets.platform ||
                                 existing.explicitPlatform === &quot;all&quot;)) {
                    &#x2F;&#x2F; do not clobber existing binding with windows-only binding
                    return null;
                }
                
                &#x2F;&#x2F; target this windows binding for the current platform
                targetPlatform = brackets.platform;
            }
        }
        
        &#x2F;&#x2F; skip if this binding doesn&#39;t match the current platform
        if (targetPlatform !== brackets.platform) {
            return null;
        }
        
        &#x2F;&#x2F; skip if the key is already assigned
        if (existing) {
            if (!existing.explicitPlatform &amp;&amp; explicitPlatform) {
                &#x2F;&#x2F; remove the the generic binding to replace with this new platform-specific binding
                removeBinding(normalized);
                existing = false;
            }
        }
        
        &#x2F;&#x2F; delete existing bindings when
        &#x2F;&#x2F; (1) replacing a windows-compatible binding with a generic or
        &#x2F;&#x2F;     platform-specific binding
        &#x2F;&#x2F; (2) replacing a generic binding with a platform-specific binding
        var existingBindings = _commandMap[commandID] || [],
            isWindowsCompatible,
            isReplaceGeneric,
            ignoreGeneric;
        
        existingBindings.forEach(function (binding) {
            &#x2F;&#x2F; remove windows-only bindings in _commandMap
            isWindowsCompatible = exports.useWindowsCompatibleBindings &amp;&amp;
                binding.explicitPlatform === &quot;win&quot;;
            
            &#x2F;&#x2F; remove existing generic binding
            isReplaceGeneric = !binding.explicitPlatform &amp;&amp;
                explicitPlatform;
            
            if (isWindowsCompatible || isReplaceGeneric) {
                bindingsToDelete.push(binding);
            } else {
                &#x2F;&#x2F; existing binding is platform-specific and the requested binding is generic
                ignoreGeneric = binding.explicitPlatform &amp;&amp; !explicitPlatform;
            }
        });

        if (ignoreGeneric) {
            &#x2F;&#x2F; explicit command binding overrides this one
            return null;
        }
        
        if (existing) {
            &#x2F;&#x2F; do not re-assign a key binding
            console.error(&quot;Cannot assign &quot; + normalized + &quot; to &quot; + commandID + &quot;. It is already assigned to &quot; + _keyMap[normalized].commandID);
            return null;
        }
        
        &#x2F;&#x2F; remove generic or windows-compatible bindings
        bindingsToDelete.forEach(function (binding) {
            removeBinding(binding.key);
        });
        
        &#x2F;&#x2F; optional display-friendly string (e.g. CMD-+ instead of CMD-=)
        normalizedDisplay = (keyBinding.displayKey) ? normalizeKeyDescriptorString(keyBinding.displayKey) : normalized;
        
        &#x2F;&#x2F; 1-to-many commandID mapping to key binding
        if (!_commandMap[commandID]) {
            _commandMap[commandID] = [];
        }
        
        result = {
            key                 : normalized,
            displayKey          : normalizedDisplay,
            explicitPlatform    : explicitPlatform
        };
        
        _commandMap[commandID].push(result);
        
        &#x2F;&#x2F; 1-to-1 key binding to commandID
        _keyMap[normalized] = {
            commandID           : commandID,
            key                 : normalized,
            displayKey          : normalizedDisplay,
            explicitPlatform    : explicitPlatform
        };
        
        &#x2F;&#x2F; notify listeners
        command = CommandManager.get(commandID);
        
        if (command) {
            $(command).triggerHandler(&quot;keyBindingAdded&quot;, [result]);
        }
        
        return result;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_buildKeyDescriptor</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>hasCtrl</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Is Ctrl key enabled</dd>
    <dt>hasAlt</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Is Alt key enabled</dd>
    <dt>hasShift</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Is Shift key enabled</dd>
    <dt>key</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The key that's pressed</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The normalized key descriptor</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _buildKeyDescriptor(hasMacCtrl, hasCtrl, hasAlt, hasShift, key) {
        if (!key) {
            console.log(&quot;KeyBindingManager _buildKeyDescriptor() - No key provided!&quot;);
            return &quot;&quot;;
        }
        
        var keyDescriptor = [];
       
        if (hasMacCtrl) {
            keyDescriptor.push(&quot;Ctrl&quot;);
        }
        if (hasAlt) {
            keyDescriptor.push(&quot;Alt&quot;);
        }
        if (hasShift) {
            keyDescriptor.push(&quot;Shift&quot;);
        }

        if (hasCtrl) {
            &#x2F;&#x2F; Windows display Ctrl first, Mac displays Command symbol last
            if (brackets.platform === &quot;mac&quot;) {
                keyDescriptor.push(&quot;Cmd&quot;);
            } else {
                keyDescriptor.unshift(&quot;Ctrl&quot;);
            }
        }

        keyDescriptor.push(key);
        
        return keyDescriptor.join(&quot;-&quot;);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleCommandRegistered</h4>

    
    <div class="description"><p>Adds default key bindings when commands are registered to CommandManager</p>
</div>
    
<dl>
    <dt>event</dt>
    <dd class="label label-info pull-left">$.Event</dd>
    <dd>jQuery event</dd>
    <dt>command</dt>
    <dd class="label label-info pull-left">Command</dd>
    <dd>Newly registered command</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleCommandRegistered(event, command) {
        var commandId   = command.getID(),
            defaults    = KeyboardPrefs[commandId];
        
        if (defaults) {
            addBinding(commandId, defaults);
        }
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>_handleKey</h4>

    
    <div class="description"><p>Process the keybinding for the current key.</p>
</div>
    
<dl>
    <dt>A</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>key-description string.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true if the key was processed, false otherwise</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleKey(key) {
        if (_enabled &amp;&amp; _keyMap[key]) {
            &#x2F;&#x2F; The execute() function returns a promise because some commands are async.
            &#x2F;&#x2F; Generally, commands decide whether they can run or not synchronously,
            &#x2F;&#x2F; and reject immediately, so we can test for that synchronously.
            var promise = CommandManager.execute(_keyMap[key].commandID);
            return (promise.state() !== &quot;rejected&quot;);
        }
        return false;
    }

    &#x2F;&#x2F; TODO (issue #414): Replace this temporary fix with a more robust solution to handle focus and modality</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>_handleKeyEvent</h4>

    
    <div class="description"><p>Handles a given keydown event, checking global hooks first before
deciding to handle it ourselves.</p>
</div>
    
<dl>
    <dt>The</dt>
    <dd class="label label-info pull-left">Event</dd>
    <dd>keydown event to handle.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _handleKeyEvent(event) {
        var i, handled = false;
        for (i = _globalKeydownHooks.length - 1; i &gt;= 0; i--) {
            if (_globalKeydownHooks[i](event)) {
                handled = true;
                break;
            }
        }
        if (!handled &amp;&amp; _handleKey(_translateKeyboardEvent(event))) {
            event.stopPropagation();
            event.preventDefault();
        }
    }

    AppInit.htmlReady(function () {
        &#x2F;&#x2F; Install keydown event listener.
        window.document.body.addEventListener(
            &quot;keydown&quot;,
            _handleKeyEvent,
            true
        );
        
        exports.useWindowsCompatibleBindings = (brackets.platform !== &quot;mac&quot;) &amp;&amp;
            (brackets.platform !== &quot;win&quot;);
    });
    
    $(CommandManager).on(&quot;commandRegistered&quot;, _handleCommandRegistered);

    &#x2F;&#x2F; unit test only
    exports._reset = _reset;

    &#x2F;&#x2F; Define public API
    exports.getKeymap = getKeymap;
    exports.setEnabled = setEnabled;
    exports.addBinding = addBinding;
    exports.removeBinding = removeBinding;
    exports.formatKeyDescriptor = formatKeyDescriptor;
    exports.getKeyBindings = getKeyBindings;
    exports.addGlobalKeydownHook = addGlobalKeydownHook;
    exports.removeGlobalKeydownHook = removeGlobalKeydownHook;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_isKeyAssigned</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>A</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>normalized key-description string.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true if the key is already assigned, false otherwise.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _isKeyAssigned(key) {
        return (_keyMap[key] !== undefined);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_mapKeycodeToKey</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>The</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>keycode from the keyboard event.</dd>
    <dt>The</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>current best guess at what the key is.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>If the key is OS-inconsistent, the correct key; otherwise, the original key.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _mapKeycodeToKey(keycode, key) {
        &#x2F;&#x2F; If keycode represents one of the digit keys (0-9), then return the corresponding digit
        &#x2F;&#x2F; by subtracting KeyEvent.DOM_VK_0 from keycode. ie. [48-57] --&gt; [0-9]
        if (keycode &gt;= KeyEvent.DOM_VK_0 &amp;&amp; keycode &lt;= KeyEvent.DOM_VK_9) {
            return String(keycode - KeyEvent.DOM_VK_0);
        &#x2F;&#x2F; Do the same with the numpad numbers
        &#x2F;&#x2F; by subtracting KeyEvent.DOM_VK_NUMPAD0 from keycode. ie. [96-105] --&gt; [0-9]
        } else if (keycode &gt;= KeyEvent.DOM_VK_NUMPAD0 &amp;&amp; keycode &lt;= KeyEvent.DOM_VK_NUMPAD9) {
            return String(keycode - KeyEvent.DOM_VK_NUMPAD0);
        }
        
        
        switch (keycode) {
        case KeyEvent.DOM_VK_SEMICOLON:
            return &quot;;&quot;;
        case KeyEvent.DOM_VK_EQUALS:
            return &quot;=&quot;;
        case KeyEvent.DOM_VK_COMMA:
            return &quot;,&quot;;
        case KeyEvent.DOM_VK_SUBTRACT:
        case KeyEvent.DOM_VK_DASH:
            return &quot;-&quot;;
        case KeyEvent.DOM_VK_ADD:
            return &quot;+&quot;;
        case KeyEvent.DOM_VK_DECIMAL:
        case KeyEvent.DOM_VK_PERIOD:
            return &quot;.&quot;;
        case KeyEvent.DOM_VK_DIVIDE:
        case KeyEvent.DOM_VK_SLASH:
            return &quot;&#x2F;&quot;;
        case KeyEvent.DOM_VK_BACK_QUOTE:
            return &quot;`&quot;;
        case KeyEvent.DOM_VK_OPEN_BRACKET:
            return &quot;[&quot;;
        case KeyEvent.DOM_VK_BACK_SLASH:
            return &quot;\\&quot;;
        case KeyEvent.DOM_VK_CLOSE_BRACKET:
            return &quot;]&quot;;
        case KeyEvent.DOM_VK_QUOTE:
            return &quot;&#39;&quot;;
        default:
            return key;
        }
    }</code></pre></div><div class="member private public">

<span class="pull-right scope">
    Private
    Public API
</span>
    <h4>_reset</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _reset() {
        _keyMap = {};
        _commandMap = {};
        _globalKeydownHooks = [];
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_sortByPlatform</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _sortByPlatform(a, b) {
        var a1 = (a.platform) ? 1 : 0,
            b1 = (b.platform) ? 1 : 0;
        return b1 - a1;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_translateKeyboardEvent</h4>

    
    <div class="description"><p>Takes a keyboard event and translates it into a key in a key map</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _translateKeyboardEvent(event) {
        var hasMacCtrl = (brackets.platform === &quot;mac&quot;) ? (event.ctrlKey) : false,
            hasCtrl = (brackets.platform !== &quot;mac&quot;) ? (event.ctrlKey) : (event.metaKey),
            hasAlt = (event.altKey),
            hasShift = (event.shiftKey),
            key = String.fromCharCode(event.keyCode);
        
        &#x2F;&#x2F;From the W3C, if we can get the KeyboardEvent.keyIdentifier then look here
        &#x2F;&#x2F;As that will let us use keys like then function keys &quot;F5&quot; for commands. The
        &#x2F;&#x2F;full set of values we can use is here
        &#x2F;&#x2F;http:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;2007&#x2F;WD-DOM-Level-3-Events-20071221&#x2F;keyset.html#KeySet-Set
        var ident = event.keyIdentifier;
        if (ident) {
            if (ident.charAt(0) === &quot;U&quot; &amp;&amp; ident.charAt(1) === &quot;+&quot;) {
                &#x2F;&#x2F;This is a unicode code point like &quot;U+002A&quot;, get the 002A and use that
                key = String.fromCharCode(parseInt(ident.substring(2), 16));
            } else {
                &#x2F;&#x2F;This is some non-character key, just use the raw identifier
                key = ident;
            }
        }
        
        &#x2F;&#x2F; Translate some keys to their common names
        if (key === &quot;\t&quot;) {
            key = &quot;Tab&quot;;
        } else if (key === &quot; &quot;) {
            key = &quot;Space&quot;;
        } else {
            key = _mapKeycodeToKey(event.keyCode, key);
        }

        return _buildKeyDescriptor(hasMacCtrl, hasCtrl, hasAlt, hasShift, key);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>addBinding</h4>

    
    <div class="description"><p>Add one or more key bindings to a particular Command.</p>
</div>
    
<dl>
    <dt>command</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string, Command</dd>
    <dd>- A command ID or command object</dd>
    <dt>keyBindings</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">({key: string, displayKey: string}, Array.&lt;{key: string, displayKey: string, platform: string}&gt;)</dd>
    <dd>A single key binding or an array of keybindings. Example: "Shift-Cmd-F". Mac and Win key equivalents are automatically mapped to each other. Use displayKey property to display a different string (e.g. "CMD+" instead of "CMD=").</dd>
    <dt>platform</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>The target OS of the keyBindings either "mac", "win" or "linux". If undefined, all platforms not explicitly defined will use the key binding.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">{key: string,displayKey:String},Array.&lt;{key: string,displayKey:String}&gt;</dd>
    <dd>Returns record(s) for valid key binding(s)</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addBinding(command, keyBindings, platform) {
        var commandID           = &quot;&quot;,
            results;
        
        if (!command) {
            console.error(&quot;addBinding(): missing required parameter: command&quot;);
            return;
        }
        
        if (!keyBindings) { return; }
        
        if (typeof (command) === &quot;string&quot;) {
            commandID = command;
        } else {
            commandID = command.getID();
        }
        
        if (Array.isArray(keyBindings)) {
            var keyBinding;
            results = [];

            &#x2F;&#x2F; process platform-specific bindings first
            keyBindings.sort(_sortByPlatform);
            
            keyBindings.forEach(function addSingleBinding(keyBindingRequest) {
                &#x2F;&#x2F; attempt to add keybinding
                keyBinding = _addBinding(commandID, keyBindingRequest, keyBindingRequest.platform);
                
                if (keyBinding) {
                    results.push(keyBinding);
                }
            });
        } else {
            results = _addBinding(commandID, keyBindings, platform);
        }
        
        return results;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>addGlobalKeydownHook</h4>

    
    <div class="description"><p>Adds a global keydown hook that gets first crack at keydown events 
before standard keybindings do. This is intended for use by modal or 
semi-modal UI elements like dialogs or the code hint list that should 
execute before normal command bindings are run. </p>
<p>The hook is passed one parameter, the original keyboard event. If the 
hook handles the event (or wants to block other global hooks from 
handling the event), it should return true. Note that this will <em>only</em>
stop other global hooks and KeyBindingManager from handling the
event; to prevent further event propagation, you will need to call
stopPropagation(), stopImmediatePropagation(), and/or preventDefault()
as usual.</p>
<p>Multiple keydown hooks can be registered, and are executed in order, 
most-recently-added first.</p>
<p>(We have to have a special API for this because (1) handlers are normally
called in least-recently-added order, and we want most-recently-added; 
(2) native DOM events don&#39;t have a way for us to find out if 
stopImmediatePropagation()/stopPropagation() has been called on the
event, so we have to have some other way for one of the hooks to 
indicate that it wants to block the other hooks from running.)</p>
</div>
    
<dl>
    <dt>hook</dt>
    <dd class="label label-info pull-left">function(Event): boolean</dd>
    <dd>The global hook to add.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function addGlobalKeydownHook(hook) {
        _globalKeydownHooks.push(hook);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>formatKeyDescriptor</h4>

    
    <div class="description"><p>Convert normalized key representation to display appropriate for platform.</p>
</div>
    
<dl>
    <dt>descriptor</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>Normalized key descriptor.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!string</dd>
    <dd>Display/Operating system appropriate string</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function formatKeyDescriptor(descriptor) {
        var displayStr;
        
        if (brackets.platform === &quot;mac&quot;) {
            displayStr = descriptor.replace(&#x2F;-(?!$)&#x2F;g, &quot;&quot;);     &#x2F;&#x2F; remove dashes
            displayStr = displayStr.replace(&quot;Ctrl&quot;, &quot;\u2303&quot;);  &#x2F;&#x2F; Ctrl &gt; control symbol
            displayStr = displayStr.replace(&quot;Cmd&quot;, &quot;\u2318&quot;);   &#x2F;&#x2F; Cmd &gt; command symbol
            displayStr = displayStr.replace(&quot;Shift&quot;, &quot;\u21E7&quot;); &#x2F;&#x2F; Shift &gt; shift symbol
            displayStr = displayStr.replace(&quot;Alt&quot;, &quot;\u2325&quot;);   &#x2F;&#x2F; Alt &gt; option symbol
        } else {
            displayStr = descriptor.replace(&quot;Ctrl&quot;, Strings.KEYBOARD_CTRL);   &#x2F;&#x2F; Ctrl
            displayStr = displayStr.replace(&quot;Shift&quot;, Strings.KEYBOARD_SHIFT); &#x2F;&#x2F; Shift &gt; shift symbol
            displayStr = displayStr.replace(&quot;Space&quot;, Strings.KEYBOARD_SPACE); &#x2F;&#x2F; Alt &gt; option symbol
            displayStr = displayStr.replace(&#x2F;-(?!$)&#x2F;g, &quot;+&quot;);
        }

        return displayStr;
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getKeyBindings</h4>

    
    <div class="description"><p>Retrieve key bindings currently associated with a command</p>
</div>
    
<dl>
    <dt>command</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string, Command</dd>
    <dd>- A command ID or command object</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!Array.&lt;{{key: string,displayKey: string}}&gt;</dd>
    <dd>An array of associated key bindings.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getKeyBindings(command) {
        var bindings    = [],
            commandID   = &quot;&quot;;
        
        if (!command) {
            console.error(&quot;getKeyBindings(): missing required parameter: command&quot;);
            return [];
        }
        
        if (typeof (command) === &quot;string&quot;) {
            commandID = command;
        } else {
            commandID = command.getID();
        }
        
        bindings = _commandMap[commandID];
        return bindings || [];
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>getKeymap</h4>

    
    <div class="description"><p>Returns a copy of the keymap</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!Object.&lt;string,{commandID: string,key: string,displayKey: string}&gt;</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function getKeymap() {
        return $.extend({}, _keyMap);
    }</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>normalizeKeyDescriptorString</h4>

    
    <div class="description"><p>normalizes the incoming key descriptor so the modifier keys are always specified in the correct order</p>
</div>
    
<dl>
    <dt>The</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>string for a key descriptor, can be in any order, the result will be Ctrl-Alt-Shift-<Key></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The normalized key descriptor or null if the descriptor invalid</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function normalizeKeyDescriptorString(origDescriptor) {
        var hasMacCtrl = false,
            hasCtrl = false,
            hasAlt = false,
            hasShift = false,
            key = &quot;&quot;,
            error = false;

        function _compareModifierString(left, right) {
            if (!left || !right) {
                return false;
            }
            left = left.trim().toLowerCase();
            right = right.trim().toLowerCase();
            
            return (left.length &gt; 0 &amp;&amp; left === right);
        }
        
        origDescriptor.split(&quot;-&quot;).forEach(function parseDescriptor(ele, i, arr) {
            if (_compareModifierString(&quot;ctrl&quot;, ele)) {
                if (brackets.platform === &quot;mac&quot;) {
                    hasMacCtrl = true;
                } else {
                    hasCtrl = true;
                }
            } else if (_compareModifierString(&quot;cmd&quot;, ele)) {
                hasCtrl = true;
            } else if (_compareModifierString(&quot;alt&quot;, ele)) {
                hasAlt = true;
            } else if (_compareModifierString(&quot;opt&quot;, ele)) {
                hasAlt = true;
            } else if (_compareModifierString(&quot;shift&quot;, ele)) {
                hasShift = true;
            } else if (key.length &gt; 0) {
                console.log(&quot;KeyBindingManager normalizeKeyDescriptorString() - Multiple keys defined. Using key: &quot; + key + &quot; from: &quot; + origDescriptor);
                error = true;
            } else {
                key = ele;
            }
        });
        
        if (error) {
            return null;
        }

        &#x2F;&#x2F; Check to see if the binding is for &quot;-&quot;.
        if (key === &quot;&quot; &amp;&amp; origDescriptor.search(&#x2F;^.+--$&#x2F;) !== -1) {
            key = &quot;-&quot;;
        }
        
        &#x2F;&#x2F; &#39;+&#39; char is valid if it&#39;s the only key. Keyboard shortcut strings should use
        &#x2F;&#x2F; unicode characters (unescaped). Keyboard shortcut display strings may use
        &#x2F;&#x2F; unicode escape sequences (e.g. \u20AC euro sign)
        if ((key.indexOf(&quot;+&quot;)) &gt;= 0 &amp;&amp; (key.length &gt; 1)) {
            return null;
        }
        
        return _buildKeyDescriptor(hasMacCtrl, hasCtrl, hasAlt, hasShift, key);
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>removeBinding</h4>

    
    <div class="description"><p>Remove a key binding from _keymap</p>
</div>
    
<dl>
    <dt>key</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>- a key-description string that may or may not be normalized.</dd>
    <dt>platform</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>- OS from which to remove the binding (all platforms if unspecified)</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function removeBinding(key, platform) {
        if (!key || ((platform !== null) &amp;&amp; (platform !== undefined) &amp;&amp; (platform !== brackets.platform))) {
            return;
        }

        var normalizedKey = normalizeKeyDescriptorString(key);
        
        if (!normalizedKey) {
            console.log(&quot;Fail to nomalize &quot; + key);
        } else if (_isKeyAssigned(normalizedKey)) {
            var binding = _keyMap[normalizedKey],
                command = CommandManager.get(binding.commandID),
                bindings = _commandMap[binding.commandID];
            
            &#x2F;&#x2F; delete key binding record
            delete _keyMap[normalizedKey];
            
            if (bindings) {
                &#x2F;&#x2F; delete mapping from command to key binding
                _commandMap[binding.commandID] = bindings.filter(function (b) {
                    return (b.key !== normalizedKey);
                });
    
                if (command) {
                    $(command).triggerHandler(&quot;keyBindingRemoved&quot;, [{key: normalizedKey, displayKey: binding.displayKey}]);
                }
            }
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>removeGlobalKeydownHook</h4>

    
    <div class="description"><p>Removes a global keydown hook added by <code>addGlobalKeydownHook</code>.
Does not need to be the most recently added hook.</p>
</div>
    
<dl>
    <dt>hook</dt>
    <dd class="label label-info pull-left">function(Event): boolean</dd>
    <dd>The global hook to remove.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function removeGlobalKeydownHook(hook) {
        var index = _globalKeydownHooks.indexOf(hook);
        if (index !== -1) {
            _globalKeydownHooks.splice(index, 1);
        }
    }</code></pre></div><div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>setEnabled</h4>

    
    <div class="description"><p>Enable or disable key bindings. Clients such as dialogs may wish to disable
global key bindings temporarily.</p>
</div>
    
<dl>
    <dt>A</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>key-description string.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true if the key was processed, false otherwise</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function setEnabled(value) {
        _enabled = value;
    }</code></pre></div>
</section>

        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>