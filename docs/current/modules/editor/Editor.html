<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Editor - Brackets API</title>
    <link rel="stylesheet" href="../../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/typeahead.js-bootstrap.css">
    <link rel="stylesheet" href="../../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../../assets/css/prism.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.css">
    <![endif]-->
    <script type="text/javascript" src="../../assets/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../../assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../assets/js/typeahead.js"></script>
    <script type="text/javascript" src="../../assets/js/main.js"></script>
    <script src="http://use.edgefonts.net/source-sans-pro:n3,i3,n4,i4;source-code-pro.js"></script>

    <!-- Control the Flash of Unstyled Text (or FOUT) -->
    <style type="text/css">
        .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4,
        .wf-loading h5, .wf-loading h6, .wf-loading p, .wf-loading a {
            visibility: hidden;
        }
    </style>
    
    <script>
      window.moduleLevel = "../..";
    </script>
  </head>
  
  <body>
    <div class="row-fluid">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="../../index.html">Brackets API</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li><a href="#dependencies">Dependencies</a></li>
                <li><a href="#variables">Variables</a></li>
                <li><a href="#functions">Functions</a></li>
                <li><a href="#classes">Classes</a></li>
              </ul>
            </div>
            <input class="typeahead" placeholder="Search..." type="text" >
          </div>
        </div>
      </div>    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="left-section">
            <h2 class="number-of-modules">Modules (145)</h2>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_"><i class="icon-folder-open"></i>[root]</a>
              </li>
            </ul>
            <ul id="package_" class="nav nav-list">
              <li><a href="../../modules/brackets.html">brackets</a></li>
              <li><a href="../../modules/dependencies.html">dependencies</a></li>
              <li><a href="../../modules/main.html">main</a></li>
              <li><a href="../../modules/strings.html">strings</a></li>
              <li><a href="../../modules/xorigin.html">xorigin</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_command"><i class="icon-folder-open"></i>command</a>
              </li>
            </ul>
            <ul id="package_command" class="nav nav-list">
              <li><a href="../../modules/command/CommandManager.html">CommandManager</a></li>
              <li><a href="../../modules/command/Commands.html">Commands</a></li>
              <li><a href="../../modules/command/DefaultMenus.html">DefaultMenus</a></li>
              <li><a href="../../modules/command/KeyBindingManager.html">KeyBindingManager</a></li>
              <li><a href="../../modules/command/Menus.html">Menus</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_document"><i class="icon-folder-open"></i>document</a>
              </li>
            </ul>
            <ul id="package_document" class="nav nav-list">
              <li><a href="../../modules/document/ChangedDocumentTracker.html">ChangedDocumentTracker</a></li>
              <li><a href="../../modules/document/Document.html">Document</a></li>
              <li><a href="../../modules/document/DocumentCommandHandlers.html">DocumentCommandHandlers</a></li>
              <li><a href="../../modules/document/DocumentManager.html">DocumentManager</a></li>
              <li><a href="../../modules/document/InMemoryFile.html">InMemoryFile</a></li>
              <li><a href="../../modules/document/TextRange.html">TextRange</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_editor"><i class="icon-folder-open"></i>editor</a>
              </li>
            </ul>
            <ul id="package_editor" class="nav nav-list">
              <li><a href="../../modules/editor/CodeHintList.html">CodeHintList</a></li>
              <li><a href="../../modules/editor/CodeHintManager.html">CodeHintManager</a></li>
              <li><a href="../../modules/editor/CSSInlineEditor.html">CSSInlineEditor</a></li>
              <li><a href="../../modules/editor/Editor.html">Editor</a></li>
              <li><a href="../../modules/editor/EditorCommandHandlers.html">EditorCommandHandlers</a></li>
              <li><a href="../../modules/editor/EditorManager.html">EditorManager</a></li>
              <li><a href="../../modules/editor/EditorOptionHandlers.html">EditorOptionHandlers</a></li>
              <li><a href="../../modules/editor/EditorStatusBar.html">EditorStatusBar</a></li>
              <li><a href="../../modules/editor/ImageViewer.html">ImageViewer</a></li>
              <li><a href="../../modules/editor/InlineTextEditor.html">InlineTextEditor</a></li>
              <li><a href="../../modules/editor/InlineWidget.html">InlineWidget</a></li>
              <li><a href="../../modules/editor/MultiRangeInlineEditor.html">MultiRangeInlineEditor</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_extensibility"><i class="icon-folder-open"></i>extensibility</a>
              </li>
            </ul>
            <ul id="package_extensibility" class="nav nav-list">
              <li><a href="../../modules/extensibility/ExtensionManager.html">ExtensionManager</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerDialog.html">ExtensionManagerDialog</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerView.html">ExtensionManagerView</a></li>
              <li><a href="../../modules/extensibility/ExtensionManagerViewModel.html">ExtensionManagerViewModel</a></li>
              <li><a href="../../modules/extensibility/InstallExtensionDialog.html">InstallExtensionDialog</a></li>
              <li><a href="../../modules/extensibility/Package.html">Package</a></li>
              <li><a href="../../modules/extensibility/registry_utils.html">registry_utils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_file"><i class="icon-folder-open"></i>file</a>
              </li>
            </ul>
            <ul id="package_file" class="nav nav-list">
              <li><a href="../../modules/file/FileUtils.html">FileUtils</a></li>
              <li><a href="../../modules/file/NativeFileError.html">NativeFileError</a></li>
              <li><a href="../../modules/file/NativeFileSystem.html">NativeFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem"><i class="icon-folder-open"></i>filesystem</a>
              </li>
            </ul>
            <ul id="package_filesystem" class="nav nav-list">
              <li><a href="../../modules/filesystem/Directory.html">Directory</a></li>
              <li><a href="../../modules/filesystem/File.html">File</a></li>
              <li><a href="../../modules/filesystem/FileIndex.html">FileIndex</a></li>
              <li><a href="../../modules/filesystem/FileSystem.html">FileSystem</a></li>
              <li><a href="../../modules/filesystem/FileSystemEntry.html">FileSystemEntry</a></li>
              <li><a href="../../modules/filesystem/FileSystemError.html">FileSystemError</a></li>
              <li><a href="../../modules/filesystem/FileSystemStats.html">FileSystemStats</a></li>
              <li><a href="../../modules/filesystem/WatchedRoot.html">WatchedRoot</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/AppshellFileSystem.html">AppshellFileSystem</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_filesystem_impls_appshell_node"><i class="icon-folder-open"></i>filesystem&#x2F;impls&#x2F;appshell&#x2F;node</a>
              </li>
            </ul>
            <ul id="package_filesystem_impls_appshell_node" class="nav nav-list">
              <li><a href="../../modules/filesystem/impls/appshell/node/FileWatcherDomain.html">FileWatcherDomain</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_help"><i class="icon-folder-open"></i>help</a>
              </li>
            </ul>
            <ul id="package_help" class="nav nav-list">
              <li><a href="../../modules/help/HelpCommandHandlers.html">HelpCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_language"><i class="icon-folder-open"></i>language</a>
              </li>
            </ul>
            <ul id="package_language" class="nav nav-list">
              <li><a href="../../modules/language/CodeInspection.html">CodeInspection</a></li>
              <li><a href="../../modules/language/CSSUtils.html">CSSUtils</a></li>
              <li><a href="../../modules/language/HTMLDOMDiff.html">HTMLDOMDiff</a></li>
              <li><a href="../../modules/language/HTMLInstrumentation.html">HTMLInstrumentation</a></li>
              <li><a href="../../modules/language/HTMLSimpleDOM.html">HTMLSimpleDOM</a></li>
              <li><a href="../../modules/language/HTMLTokenizer.html">HTMLTokenizer</a></li>
              <li><a href="../../modules/language/HTMLUtils.html">HTMLUtils</a></li>
              <li><a href="../../modules/language/JSUtils.html">JSUtils</a></li>
              <li><a href="../../modules/language/LanguageManager.html">LanguageManager</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Agents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Agents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Agents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Agents/ConsoleAgent.html">ConsoleAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/CSSAgent.html">CSSAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMAgent.html">DOMAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMHelpers.html">DOMHelpers</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/DOMNode.html">DOMNode</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/EditAgent.html">EditAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/GotoAgent.html">GotoAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/HighlightAgent.html">HighlightAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/NetworkAgent.html">NetworkAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteAgent.html">RemoteAgent</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/RemoteFunctions.html">RemoteFunctions</a></li>
              <li><a href="../../modules/LiveDevelopment/Agents/ScriptAgent.html">ScriptAgent</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Documents"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Documents</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Documents" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Documents/CSSDocument.html">CSSDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/HTMLDocument.html">HTMLDocument</a></li>
              <li><a href="../../modules/LiveDevelopment/Documents/JSDocument.html">JSDocument</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Inspector"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Inspector</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Inspector" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Inspector/Inspector.html">Inspector</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment"><i class="icon-folder-open"></i>LiveDevelopment</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/LiveDevelopment.html">LiveDevelopment</a></li>
              <li><a href="../../modules/LiveDevelopment/LiveDevServerManager.html">LiveDevServerManager</a></li>
              <li><a href="../../modules/LiveDevelopment/main.html">main</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_LiveDevelopment_Servers"><i class="icon-folder-open"></i>LiveDevelopment&#x2F;Servers</a>
              </li>
            </ul>
            <ul id="package_LiveDevelopment_Servers" class="nav nav-list">
              <li><a href="../../modules/LiveDevelopment/Servers/BaseServer.html">BaseServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/FileServer.html">FileServer</a></li>
              <li><a href="../../modules/LiveDevelopment/Servers/UserServer.html">UserServer</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_preferences"><i class="icon-folder-open"></i>preferences</a>
              </li>
            </ul>
            <ul id="package_preferences" class="nav nav-list">
              <li><a href="../../modules/preferences/PreferencesBase.html">PreferencesBase</a></li>
              <li><a href="../../modules/preferences/PreferencesDialogs.html">PreferencesDialogs</a></li>
              <li><a href="../../modules/preferences/PreferencesImpl.html">PreferencesImpl</a></li>
              <li><a href="../../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
              <li><a href="../../modules/preferences/PreferenceStorage.html">PreferenceStorage</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_project"><i class="icon-folder-open"></i>project</a>
              </li>
            </ul>
            <ul id="package_project" class="nav nav-list">
              <li><a href="../../modules/project/FileIndexManager.html">FileIndexManager</a></li>
              <li><a href="../../modules/project/FileSyncManager.html">FileSyncManager</a></li>
              <li><a href="../../modules/project/FileViewController.html">FileViewController</a></li>
              <li><a href="../../modules/project/ProjectManager.html">ProjectManager</a></li>
              <li><a href="../../modules/project/SidebarView.html">SidebarView</a></li>
              <li><a href="../../modules/project/WorkingSetSort.html">WorkingSetSort</a></li>
              <li><a href="../../modules/project/WorkingSetView.html">WorkingSetView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_search"><i class="icon-folder-open"></i>search</a>
              </li>
            </ul>
            <ul id="package_search" class="nav nav-list">
              <li><a href="../../modules/search/FileFilters.html">FileFilters</a></li>
              <li><a href="../../modules/search/FindBar.html">FindBar</a></li>
              <li><a href="../../modules/search/FindInFiles.html">FindInFiles</a></li>
              <li><a href="../../modules/search/FindInFilesUI.html">FindInFilesUI</a></li>
              <li><a href="../../modules/search/FindReplace.html">FindReplace</a></li>
              <li><a href="../../modules/search/FindUtils.html">FindUtils</a></li>
              <li><a href="../../modules/search/QuickOpen.html">QuickOpen</a></li>
              <li><a href="../../modules/search/ScrollTrackMarkers.html">ScrollTrackMarkers</a></li>
              <li><a href="../../modules/search/SearchModel.html">SearchModel</a></li>
              <li><a href="../../modules/search/SearchResultsView.html">SearchResultsView</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_utils"><i class="icon-folder-open"></i>utils</a>
              </li>
            </ul>
            <ul id="package_utils" class="nav nav-list">
              <li><a href="../../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
              <li><a href="../../modules/utils/AppInit.html">AppInit</a></li>
              <li><a href="../../modules/utils/Async.html">Async</a></li>
              <li><a href="../../modules/utils/BuildInfoUtils.html">BuildInfoUtils</a></li>
              <li><a href="../../modules/utils/CollectionUtils.html">CollectionUtils</a></li>
              <li><a href="../../modules/utils/ColorUtils.html">ColorUtils</a></li>
              <li><a href="../../modules/utils/DeprecationWarning.html">DeprecationWarning</a></li>
              <li><a href="../../modules/utils/DragAndDrop.html">DragAndDrop</a></li>
              <li><a href="../../modules/utils/DropdownEventHandler.html">DropdownEventHandler</a></li>
              <li><a href="../../modules/utils/ExtensionLoader.html">ExtensionLoader</a></li>
              <li><a href="../../modules/utils/ExtensionUtils.html">ExtensionUtils</a></li>
              <li><a href="../../modules/utils/Global.html">Global</a></li>
              <li><a href="../../modules/utils/KeyEvent.html">KeyEvent</a></li>
              <li><a href="../../modules/utils/NativeApp.html">NativeApp</a></li>
              <li><a href="../../modules/utils/NodeConnection.html">NodeConnection</a></li>
              <li><a href="../../modules/utils/NodeDomain.html">NodeDomain</a></li>
              <li><a href="../../modules/utils/PerfUtils.html">PerfUtils</a></li>
              <li><a href="../../modules/utils/Resizer.html">Resizer</a></li>
              <li><a href="../../modules/utils/ShellAPI.html">ShellAPI</a></li>
              <li><a href="../../modules/utils/StringMatch.html">StringMatch</a></li>
              <li><a href="../../modules/utils/StringUtils.html">StringUtils</a></li>
              <li><a href="../../modules/utils/TokenUtils.html">TokenUtils</a></li>
              <li><a href="../../modules/utils/UpdateNotification.html">UpdateNotification</a></li>
              <li><a href="../../modules/utils/UrlParams.html">UrlParams</a></li>
              <li><a href="../../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
              <li><a href="../../modules/utils/ViewUtils.html">ViewUtils</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_view"><i class="icon-folder-open"></i>view</a>
              </li>
            </ul>
            <ul id="package_view" class="nav nav-list">
              <li><a href="../../modules/view/PanelManager.html">PanelManager</a></li>
              <li><a href="../../modules/view/ViewCommandHandlers.html">ViewCommandHandlers</a></li>
            </ul>
            <ul class="nav nav-list package-list">
              <li class="nav-header">
                <a href="javascript:;" class="toggle-package" data-package="package_widgets"><i class="icon-folder-open"></i>widgets</a>
              </li>
            </ul>
            <ul id="package_widgets" class="nav nav-list">
              <li><a href="../../modules/widgets/bootstrap-alerts.html">bootstrap-alerts</a></li>
              <li><a href="../../modules/widgets/bootstrap-button.html">bootstrap-button</a></li>
              <li><a href="../../modules/widgets/bootstrap-dropdown.html">bootstrap-dropdown</a></li>
              <li><a href="../../modules/widgets/bootstrap-modal.html">bootstrap-modal</a></li>
              <li><a href="../../modules/widgets/bootstrap-popover.html">bootstrap-popover</a></li>
              <li><a href="../../modules/widgets/bootstrap-scrollspy.html">bootstrap-scrollspy</a></li>
              <li><a href="../../modules/widgets/bootstrap-tab.html">bootstrap-tab</a></li>
              <li><a href="../../modules/widgets/bootstrap-tooltip.html">bootstrap-tooltip</a></li>
              <li><a href="../../modules/widgets/bootstrap-twipsy-mod.html">bootstrap-twipsy-mod</a></li>
              <li><a href="../../modules/widgets/DefaultDialogs.html">DefaultDialogs</a></li>
              <li><a href="../../modules/widgets/Dialogs.html">Dialogs</a></li>
              <li><a href="../../modules/widgets/DropdownButton.html">DropdownButton</a></li>
              <li><a href="../../modules/widgets/ModalBar.html">ModalBar</a></li>
              <li><a href="../../modules/widgets/PopUpManager.html">PopUpManager</a></li>
              <li><a href="../../modules/widgets/StatusBar.html">StatusBar</a></li>
            </ul>
          </div>
        </div>
        <div class="module span9">
<h1>Editor</h1>


<section class="description">
    <h3>Description</h3>
    
    <div><p>Editor is a 1-to-1 wrapper for a CodeMirror editor instance. It layers on Brackets-specific
functionality and provides APIs that cleanly pass through the bits of CodeMirror that the rest
of our codebase may want to interact with. An Editor is always backed by a Document, and stays
in sync with its content; because Editor keeps the Document alive, it&#39;s important to always
destroy() an Editor that&#39;s going away so it can release its Document ref.</p>
<p>For now, there&#39;s a distinction between the &quot;master&quot; Editor for a Document - which secretly acts
as the Document&#39;s internal model of the text state - and the multitude of &quot;slave&quot; secondary Editors
which, via Document, sync their changes to and from that master.</p>
<p>For now, direct access to the underlying CodeMirror object is still possible via <code>_codeMirror</code> --
but this is considered deprecated and may go away.</p>
<p>The Editor object dispatches the following events:</p>
<ul>
<li>keyEvent -- When any key event happens in the editor (whether it changes the text or not).
Event handlers are passed <code>({Editor}, {KeyboardEvent})</code>. The 2nd arg is the raw DOM event.
Note: most listeners will only want to respond when <code>event.type === &quot;keypress&quot;</code>.</li>
<li>cursorActivity -- When the user moves the cursor or changes the selection, or an edit occurs.
Note: do not listen to this in order to be generally informed of edits--listen to the
&quot;change&quot; event on Document instead.</li>
<li>scroll -- When the editor is scrolled, either by user action or programmatically.</li>
<li>lostContent -- When the backing Document changes in such a way that this Editor is no longer
able to display accurate text. This occurs if the Document&#39;s file is deleted, or in certain
Document-&gt;editor syncing edge cases that we do not yet support (the latter cause will
eventually go away).</li>
<li>optionChange -- Triggered when an option for the editor is changed. The 2nd arg to the listener
is a string containing the editor option that is changing. The 3rd arg, which can be any
data type, is the new value for the editor option.</li>
</ul>
<p>The Editor also dispatches &quot;change&quot; events internally, but you should listen for those on
Documents, not Editors.</p>
<p>These are jQuery events, so to listen for them you do something like this:
    <code>$(editorInstance).on(&quot;eventname&quot;, handler);</code></p>
</div>
</section>

<section id="dependencies">
    <h3>Dependencies</h3>

    <ul class="nav nav-list">
        <li><a href="..&#x2F;../modules/utils/AnimationUtils.html">AnimationUtils</a></li>
        <li><a href="..&#x2F;../modules/utils/Async.html">Async</a></li>
        <li><a href="..&#x2F;../modules/thirdparty/CodeMirror2/lib/codemirror.html">codemirror</a></li>
        <li><a href="..&#x2F;../modules/thirdparty/lodash.html">lodash</a></li>
        <li><a href="..&#x2F;../modules/command/Menus.html">Menus</a></li>
        <li><a href="..&#x2F;../modules/utils/PerfUtils.html">PerfUtils</a></li>
        <li><a href="..&#x2F;../modules/widgets/PopUpManager.html">PopUpManager</a></li>
        <li><a href="..&#x2F;../modules/preferences/PreferencesManager.html">PreferencesManager</a></li>
        <li><a href="..&#x2F;../modules/strings.html">strings</a></li>
        <li><a href="..&#x2F;../modules/document/TextRange.html">TextRange</a></li>
        <li><a href="..&#x2F;../modules/utils/TokenUtils.html">TokenUtils</a></li>
        <li><a href="..&#x2F;../modules/utils/ValidationUtils.html">ValidationUtils</a></li>
        <li><a href="..&#x2F;../modules/utils/ViewUtils.html">ViewUtils</a></li>
    </ul>

</section>
<section id="variables">
    
    <h3>Variables 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member public">

<span class="pull-right scope">
    
    Public API
</span>
    <h4>BOUNDARY_CHECK_NORMAL</h4>

    
<dl>
    <dt>Type</dt>
    <dd>number</dd>
</dl>
    <div class="description"><p>Constant: ignore upper boundary when centering text</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var BOUNDARY_CHECK_NORMAL   = 0,
        BOUNDARY_IGNORE_TOP     = 1;</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>CLOSE_BRACKETS</h4>

    
<dl>
</dl>
    <div class="description"><p>Editor preferences</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var CLOSE_BRACKETS    = &quot;closeBrackets&quot;,
        CLOSE_TAGS        = &quot;closeTags&quot;,
        HIGHLIGHT_MATCHES = &quot;highlightMatches&quot;,
        SCROLL_PAST_END   = &quot;scrollPastEnd&quot;,
        SHOW_LINE_NUMBERS = &quot;showLineNumbers&quot;,
        SMART_INDENT      = &quot;smartIndent&quot;,
        SOFT_TABS         = &quot;softTabs&quot;,
        SPACE_UNITS       = &quot;spaceUnits&quot;,
        STYLE_ACTIVE_LINE = &quot;styleActiveLine&quot;,
        TAB_SIZE          = &quot;tabSize&quot;,
        WORD_WRAP         = &quot;wordWrap&quot;,
        USE_TAB_CHAR      = &quot;useTabChar&quot;;
    
    var cmOptions         = {};</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>MIN_SPACE_UNITS</h4>

    
<dl>
    <dt>Type</dt>
    <dd>number</dd>
</dl>
    <div class="description"><p>Constants</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var MIN_SPACE_UNITS         =  0,
        MIN_TAB_SIZE            =  1,
        DEFAULT_SPACE_UNITS     =  4,
        DEFAULT_TAB_SIZE        =  4,
        MAX_SPACE_UNITS         = 10,
        MAX_TAB_SIZE            = 10;
    
    &#x2F;&#x2F; Mappings from Brackets preferences to CodeMirror options
    cmOptions[CLOSE_BRACKETS]     = &quot;autoCloseBrackets&quot;;
    cmOptions[CLOSE_TAGS]         = &quot;autoCloseTags&quot;;
    cmOptions[HIGHLIGHT_MATCHES]  = &quot;highlightSelectionMatches&quot;;
    cmOptions[SCROLL_PAST_END]    = &quot;scrollPastEnd&quot;;
    cmOptions[SHOW_LINE_NUMBERS]  = &quot;lineNumbers&quot;;
    cmOptions[SMART_INDENT]       = &quot;smartIndent&quot;;
    cmOptions[SPACE_UNITS]        = &quot;indentUnit&quot;;
    cmOptions[STYLE_ACTIVE_LINE]  = &quot;styleActiveLine&quot;;
    cmOptions[TAB_SIZE]           = &quot;tabSize&quot;;
    cmOptions[USE_TAB_CHAR]       = &quot;indentWithTabs&quot;;
    cmOptions[WORD_WRAP]          = &quot;lineWrapping&quot;;
    
    PreferencesManager.definePreference(CLOSE_BRACKETS,    &quot;boolean&quot;, false);
    PreferencesManager.definePreference(CLOSE_TAGS,        &quot;Object&quot;, { whenOpening: true, whenClosing: true, indentTags: [] });
    PreferencesManager.definePreference(HIGHLIGHT_MATCHES, &quot;boolean&quot;, false);
    PreferencesManager.definePreference(SCROLL_PAST_END,   &quot;boolean&quot;, false);
    PreferencesManager.definePreference(SHOW_LINE_NUMBERS, &quot;boolean&quot;, true);
    PreferencesManager.definePreference(SMART_INDENT,      &quot;boolean&quot;, true);
    PreferencesManager.definePreference(SOFT_TABS,         &quot;boolean&quot;, true);
    PreferencesManager.definePreference(SPACE_UNITS,       &quot;number&quot;, DEFAULT_SPACE_UNITS, {
        validator: _.partialRight(ValidationUtils.isIntegerInRange, MIN_SPACE_UNITS, MAX_SPACE_UNITS)
    });
    PreferencesManager.definePreference(STYLE_ACTIVE_LINE, &quot;boolean&quot;, false);
    PreferencesManager.definePreference(TAB_SIZE,          &quot;number&quot;, DEFAULT_TAB_SIZE, {
        validator: _.partialRight(ValidationUtils.isIntegerInRange, MIN_TAB_SIZE, MAX_TAB_SIZE)
    });
    PreferencesManager.definePreference(USE_TAB_CHAR,      &quot;boolean&quot;, false);
    PreferencesManager.definePreference(WORD_WRAP,         &quot;boolean&quot;, true);
    
    var editorOptions = Object.keys(cmOptions);</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_duringFocus</h4>

    
<dl>
    <dt>Type</dt>
    <dd>boolean</dd>
    <dt>Private</dt>
</dl>
    <div class="description"><p>Guard flag to prevent focus() reentrancy (via blur handlers), even across Editors</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _duringFocus = false;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_instances</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Array.&lt;Editor&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"><p>List of all current (non-destroy()ed) Editor instances. Needed when changing global preferences
that affect all editors, e.g. tabbing or color scheme settings.</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    var _instances = [];</code></pre></div>
</section>

<section id="functions">

    <h3>Functions 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>    </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_checkTopBoundary</h4>

    
    <div class="description"><p>Helper functions to check options.</p>
</div>
    
<dl>
    <dt>options</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>BOUNDARY_CHECK_NORMAL or BOUNDARY_IGNORE_TOP</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _checkTopBoundary(options) {
        return (options !== BOUNDARY_IGNORE_TOP);
    }
    function _checkBottomBoundary(options) {
        return true;
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_convertPreferences</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _convertPreferences() {
        var rules = {};
        editorOptions.forEach(function (setting) {
            rules[setting] = &quot;user&quot;;
        });
        PreferencesManager.convertPreferences(module, rules);
    }
    
    _convertPreferences();
    
    &#x2F;&#x2F; Define public API
    exports.Editor                  = Editor;
    exports.BOUNDARY_CHECK_NORMAL   = BOUNDARY_CHECK_NORMAL;
    exports.BOUNDARY_IGNORE_TOP     = BOUNDARY_IGNORE_TOP;
});</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_copyPos</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>pos</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">CodeMirror.Pos</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">CodeMirror.Pos</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _copyPos(pos) {
        return new CodeMirror.Pos(pos.line, pos.ch);
    }</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_normalizeRange</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>anchorPos</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line: number, ch: number}</dd>
    <dd></dd>
    <dt>headPos</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line: number, ch: number}</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!{start:{line:number,ch:number},end:{line:number,ch:number}},reversed:boolean</dd>
    <dd>the normalized range with start <= end</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    function _normalizeRange(anchorPos, headPos) {
        if (headPos.line &lt; anchorPos.line || (headPos.line === anchorPos.line &amp;&amp; headPos.ch &lt; anchorPos.ch)) {
            return {start: _copyPos(headPos), end: _copyPos(anchorPos), reversed: true};
        } else {
            return {start: _copyPos(anchorPos), end: _copyPos(headPos), reversed: false};
        }
    }</code></pre></div>
</section>

<section id="classes">
    
    <h2>Classes</h2>

    <div class="well">
        <div class="member public">
            
            <span class="pull-right scope">Constructor</span>
            
            <h4>Editor</h4>
            <em><p>Creates a new CodeMirror editor instance bound to the given Document. The Document need not have
a &quot;master&quot; Editor realized yet, even if makeMasterEditor is false; in that case, the first time
an edit occurs we will automatically ask EditorManager to create a &quot;master&quot; editor to render the
Document modifiable.</p>
<p>ALWAYS call destroy() when you are done with an Editor - otherwise it will leak a Document ref.</p>
</em>
            
            <dl>
                <dt>document</dt>
                <dd class="label label-info pull-left">Document</dd>
                <dd></dd>
                <dt>makeMasterEditor</dt>
                <dd class="label label-info pull-left">boolean</dd>
                <dd>If true, this Editor will set itself as the (secret) "master" Editor for the Document. If false, this Editor will attach to the Document as a "slave"/ secondary editor.</dd>
                <dt>container</dt>
                <dd class="label label-info pull-left">jQueryObject</dd>
                <dd>Container to add the editor to.</dd>
                <dt>range</dt>
                <dd class="label label-info pull-left">{startLine: number, endLine: number}</dd>
                <dd>If specified, range of lines within the document to display in this editor. Inclusive.</dd>
            </dl>

            <button class="btn btn-small show-code">Show code</button>
            <pre class="code language-javascript"><code class="language-javascript">    function Editor(document, makeMasterEditor, container, range) {
        var self = this;
        
        _instances.push(this);
        
        &#x2F;&#x2F; Attach to document: add ref &amp; handlers
        this.document = document;
        document.addRef();
        
        if (range) {    &#x2F;&#x2F; attach this first: want range updated before we process a change
            this._visibleRange = new TextRange(document, range.startLine, range.endLine);
        }
        
        &#x2F;&#x2F; store this-bound version of listeners so we can remove them later
        this._handleDocumentChange = this._handleDocumentChange.bind(this);
        this._handleDocumentDeleted = this._handleDocumentDeleted.bind(this);
        this._handleDocumentLanguageChanged = this._handleDocumentLanguageChanged.bind(this);
        $(document).on(&quot;change&quot;, this._handleDocumentChange);
        $(document).on(&quot;deleted&quot;, this._handleDocumentDeleted);
        $(document).on(&quot;languageChanged&quot;, this._handleDocumentLanguageChanged);

        var mode = this._getModeFromDocument();
        
        &#x2F;&#x2F; (if makeMasterEditor, we attach the Doc back to ourselves below once we&#39;re fully initialized)
        
        this._inlineWidgets = [];
        this._inlineWidgetQueues = {};
        this._hideMarks = [];
        
        this._$messagePopover = null;
        
        &#x2F;&#x2F; Editor supplies some standard keyboard behavior extensions of its own
        var codeMirrorKeyMap = {
            &quot;Tab&quot;: function () { self._handleTabKey(); },
            &quot;Shift-Tab&quot;: &quot;indentLess&quot;,

            &quot;Left&quot;: function (instance) {
                self._handleSoftTabNavigation(-1, &quot;moveH&quot;);
            },
            &quot;Right&quot;: function (instance) {
                self._handleSoftTabNavigation(1, &quot;moveH&quot;);
            },
            &quot;Backspace&quot;: function (instance) {
                self._handleSoftTabNavigation(-1, &quot;deleteH&quot;);
            },
            &quot;Delete&quot;: function (instance) {
                self._handleSoftTabNavigation(1, &quot;deleteH&quot;);
            },
            &quot;Esc&quot;: function (instance) {
                if (self.getSelections().length &gt; 1) {
                    CodeMirror.commands.singleSelection(instance);
                } else {
                    self.removeAllInlineWidgets();
                }
            },
            &quot;Cmd-Left&quot;: &quot;goLineStartSmart&quot;
        };
        
        var currentOptions = this._currentOptions = _.zipObject(
            editorOptions,
            _.map(editorOptions, function (prefName) {
                return self._getOption(prefName);
            })
        );
        
        &#x2F;&#x2F; Create the CodeMirror instance
        &#x2F;&#x2F; (note: CodeMirror doesn&#39;t actually require using &#39;new&#39;, but jslint complains without it)
        this._codeMirror = new CodeMirror(container, {
            autoCloseBrackets           : currentOptions[CLOSE_BRACKETS],
            autoCloseTags               : currentOptions[CLOSE_TAGS],
            coverGutterNextToScrollbar  : true,
            cursorScrollMargin          : 3,
            dragDrop                    : false,
            electricChars               : false,   &#x2F;&#x2F; we use our own impl of this to avoid CodeMirror bugs; see _checkElectricChars()
            extraKeys                   : codeMirrorKeyMap,
            highlightSelectionMatches   : currentOptions[HIGHLIGHT_MATCHES],
            indentUnit                  : currentOptions[USE_TAB_CHAR] ? currentOptions[TAB_SIZE] : currentOptions[SPACE_UNITS],
            indentWithTabs              : currentOptions[USE_TAB_CHAR],
            lineNumbers                 : currentOptions[SHOW_LINE_NUMBERS],
            lineWrapping                : currentOptions[WORD_WRAP],
            matchBrackets               : { maxScanLineLength: 50000, maxScanLines: 1000 },
            matchTags                   : { bothTags: true },
            scrollPastEnd               : !range &amp;&amp; currentOptions[SCROLL_PAST_END],
            smartIndent                 : currentOptions[SMART_INDENT],
            styleActiveLine             : currentOptions[STYLE_ACTIVE_LINE],
            tabSize                     : currentOptions[TAB_SIZE]
        });
        
        &#x2F;&#x2F; Can&#39;t get CodeMirror&#39;s focused state without searching for
        &#x2F;&#x2F; CodeMirror-focused. Instead, track focus via onFocus and onBlur
        &#x2F;&#x2F; options and track state with this._focused
        this._focused = false;
        
        this._installEditorListeners();
        
        $(this).on(&quot;cursorActivity&quot;, function (jqEvent, editor) {
            self._handleCursorActivity(jqEvent);
        });
        $(this).on(&quot;keypress&quot;, function (jqEvent, editor, cmEvent) {
            self._handleKeypressEvents(cmEvent);
        });
        $(this).on(&quot;change&quot;, function (jqEvent, editor, changeList) {
            self._handleEditorChange(changeList);
        });
        
        &#x2F;&#x2F; Set code-coloring mode BEFORE populating with text, to avoid a flash of uncolored text
        this._codeMirror.setOption(&quot;mode&quot;, mode);
        
        &#x2F;&#x2F; Initially populate with text. This will send a spurious change event, so need to make
        &#x2F;&#x2F; sure this is understood as a &#39;sync from document&#39; case, not a genuine edit
        this._duringSync = true;
        this._resetText(document.getText());
        this._duringSync = false;
        
        if (range) {
            this._updateHiddenLines();
            this.setCursorPos(range.startLine, 0);
        }

        &#x2F;&#x2F; Now that we&#39;re fully initialized, we can point the document back at us if needed
        if (makeMasterEditor) {
            document._makeEditable(this);
        }
        
        &#x2F;&#x2F; Add scrollTop property to this object for the scroll shadow code to use
        Object.defineProperty(this, &quot;scrollTop&quot;, {
            get: function () {
                return this._codeMirror.getScrollInfo().top;
            }
        });
    }</code></pre>
        </div>
        
        <section class="properties ">

            <h3>Properties 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_codeMirror</h4>

    
<dl>
    <dt>Type</dt>
    <dd>!CodeMirror</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._codeMirror = null;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_duringSync</h4>

    
<dl>
    <dt>Type</dt>
    <dd>!boolean</dd>
    <dt>Private</dt>
</dl>
    <div class="description"><p>If true, we&#39;re in the middle of syncing to/from the Document. Used to ignore spurious change
events caused by us (vs. change events caused by others, which we need to pay attention to).</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._duringSync = false;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_hideMarks</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Array</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._hideMarks = null;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_inlineWidgetQueues</h4>

    
<dl>
    <dt>Type</dt>
    <dd>Object</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._inlineWidgetQueues = null;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_inlineWidgets</h4>

    
<dl>
    <dt>Type</dt>
    <dd>!Array.&lt;{id:number, data:Object}&gt;</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._inlineWidgets = null;</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_visibleRange</h4>

    
<dl>
    <dt>Type</dt>
    <dd>?TextRange</dd>
    <dt>Private</dt>
</dl>
    <div class="description"></div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._visibleRange = null;</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>document</h4>

    
<dl>
    <dt>Type</dt>
    <dd>!Document</dd>
</dl>
    <div class="description"><p>The Document we&#39;re bound to</p>
</div>

<button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.document = null;</code></pre></div>
        </section>

        <section class="methods">

            <h3>Methods 
<label class="checkbox">
    <input class="toggle-public" type="checkbox"> Show Private Members
</label>            </h3>

<div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_addIndentAtEachSelection</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>selections</dt>
    <dd class="label label-info pull-left">Array.&lt;{start:{line:number,ch:number},end:{line:number,ch:number},reversed:boolean,primary:boolean}&gt;</dd>
    <dd>The selections to indent.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._addIndentAtEachSelection = function (selections) {
        var instance = this._codeMirror,
            usingTabs = instance.getOption(&quot;indentWithTabs&quot;),
            indentUnit = instance.getOption(&quot;indentUnit&quot;),
            edits = [];
        
        _.each(selections, function (sel) {
            var indentStr = &quot;&quot;, i, numSpaces;
            if (usingTabs) {
                indentStr = &quot;\t&quot;;
            } else {
                numSpaces = indentUnit - (sel.start.ch % indentUnit);
                for (i = 0; i &lt; numSpaces; i++) {
                    indentStr += &quot; &quot;;
                }
            }
            edits.push({edit: {text: indentStr, start: sel.start}});
        });
        
        this.document.doMultipleEdits(edits);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_addInlineWidgetInternal</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._addInlineWidgetInternal = function (pos, inlineWidget, scrollLineIntoView, deferred) {
        var self = this;
        
        this.removeAllInlineWidgetsForLine(pos.line).done(function () {
            if (scrollLineIntoView === undefined) {
                scrollLineIntoView = true;
            }
    
            if (scrollLineIntoView) {
                self._codeMirror.scrollIntoView(pos);
            }
    
            inlineWidget.info = self._codeMirror.addLineWidget(pos.line, inlineWidget.htmlContent,
                                                               { coverGutter: true, noHScroll: true });
            CodeMirror.on(inlineWidget.info.line, &quot;delete&quot;, function () {
                self._removeInlineWidgetInternal(inlineWidget);
            });
            self._inlineWidgets.push(inlineWidget);

            &#x2F;&#x2F; Set up the widget to start closed, then animate open when its initial height is set.
            inlineWidget.$htmlContent.height(0);
            AnimationUtils.animateUsingClass(inlineWidget.htmlContent, &quot;animating&quot;)
                .done(function () {
                    deferred.resolve();
                });

            &#x2F;&#x2F; Callback to widget once parented to the editor. The widget should call back to
            &#x2F;&#x2F; setInlineWidgetHeight() in order to set its initial height and animate open.
            inlineWidget.onAdded();
        });
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_autoIndentEachSelection</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>selections</dt>
    <dd class="label label-info pull-left">Array.&lt;{start:{line:number,ch:number},end:{line:number,ch:number},reversed:boolean,primary:boolean}&gt;</dd>
    <dd>The selections to indent.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._autoIndentEachSelection = function (selections) {
        &#x2F;&#x2F; Capture all the line lengths, so we can tell if anything changed.
        &#x2F;&#x2F; Note that this function should only be called if all selections are within a single line.
        var instance = this._codeMirror,
            lineLengths = {};
        _.each(selections, function (sel) {
            lineLengths[sel.start.line] = instance.getLine(sel.start.line).length;
        });
        
        &#x2F;&#x2F; First, try to do a smart indent on all selections.
        CodeMirror.commands.indentAuto(instance);
        
        &#x2F;&#x2F; If there were no code or selection changes, then indent each selection one more indent.
        var changed = false,
            newSelections = this.getSelections();
        if (newSelections.length === selections.length) {
            _.each(selections, function (sel, index) {
                var newSel = newSelections[index];
                if (CodeMirror.cmpPos(sel.start, newSel.start) !== 0 ||
                        CodeMirror.cmpPos(sel.end, newSel.end) !== 0 ||
                        instance.getLine(sel.start.line).length !== lineLengths[sel.start.line]) {
                    changed = true;
                    &#x2F;&#x2F; Bail - we don&#39;t need to look any further once we&#39;ve found a change.
                    return false;
                }
            });
        } else {
            changed = true;
        }
        
        if (!changed) {
            CodeMirror.commands.indentMore(instance);
        }
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_checkElectricChars</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._checkElectricChars = function (event) {
        var instance = this._codeMirror,
            keyStr = String.fromCharCode(event.which || event.keyCode);

        if (&#x2F;[\]\{\}\)]&#x2F;.test(keyStr)) {
            &#x2F;&#x2F; If all text before the cursor is whitespace, auto-indent it
            var cursor = this.getCursorPos();
            var lineStr = instance.getLine(cursor.line);
            var nonWS = lineStr.search(&#x2F;\S&#x2F;);

            if (nonWS === -1 || nonWS &gt;= cursor.ch) {
                &#x2F;&#x2F; Need to do the auto-indent on a timeout to ensure
                &#x2F;&#x2F; the keypress is handled before auto-indenting.
                &#x2F;&#x2F; This is the same timeout value used by the
                &#x2F;&#x2F; electricChars feature in CodeMirror.
                window.setTimeout(function () {
                    instance.indentLine(cursor.line);
                }, 75);
            }
        }
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_getInlineWidgetLineNumber</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>inlineWidget</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">InlineWidget</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>The line number of the widget or -1 if not found.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._getInlineWidgetLineNumber = function (inlineWidget) {
        return this._codeMirror.getLineNumber(inlineWidget.info.line);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_getLineSpaceElement</h4>

    
    <div class="description"><p>Gets the lineSpace element within the editor (the container around the individual lines of code).
FUTURE: This is fairly CodeMirror-specific. Logic that depends on this may break if we switch
editors.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!HTMLDivElement</dd>
    <dd>The editor's lineSpace element.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._getLineSpaceElement = function () {
        return $(&quot;.CodeMirror-lines&quot;, this.getScrollerElement()).children().get(0);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_getModeFromDocument</h4>

    
    <div class="description"><p>Determine the mode to use from the document&#39;s language
Uses &quot;text/plain&quot; if the language does not define a mode</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>The mode to use</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._getModeFromDocument = function () {
        &#x2F;&#x2F; We&#39;d like undefined&#x2F;null&#x2F;&quot;&quot; to mean plain text mode. CodeMirror defaults to plaintext for any
        &#x2F;&#x2F; unrecognized mode, but it complains on the console in that fallback case: so, convert
        &#x2F;&#x2F; here so we&#39;re always explicit, avoiding console noise.
        return this.document.getLanguage().getMode() || &quot;text&#x2F;plain&quot;;
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_getOption</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>prefName</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>Name of preference to retrieve.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">*</dd>
    <dd>current value of that pref</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._getOption = function (prefName) {
        return PreferencesManager.get(prefName, this.document.file.fullPath);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleCursorActivity</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>event</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">Event</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleCursorActivity = function (event) {
        this._updateStyleActiveLine();
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleDocumentChange</h4>

    
    <div class="description"><p>Responds to changes in the Document&#39;s text, syncing the changes into our CodeMirror instance.
There are several cases where we want to ignore a Document change:</p>
<ul>
<li>if we&#39;re the master editor, Document changes should be ignored because we already have the right
text (either the change originated with us, or it has already been set into us by Document)</li>
<li>if we&#39;re a secondary editor, Document changes should be ignored if they were caused by us sending
the document an editor change that originated with us</li>
</ul>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleDocumentChange = function (event, doc, changeList) {
        var change;
        
        &#x2F;&#x2F; we&#39;re currently syncing to the Document, so don&#39;t echo back FROM the Document
        if (this._duringSync) {
            return;
        }
        
        if (this.document._masterEditor !== this) {
            &#x2F;&#x2F; Secondary editor:
            &#x2F;&#x2F; we&#39;re not the ground truth; and if we got here, this was a Document change that
            &#x2F;&#x2F; didn&#39;t come from us (e.g. a sync from another editor, a direct programmatic change
            &#x2F;&#x2F; to the document, or a sync from external disk changes)... so sync from the Document
            this._duringSync = true;
            this._applyChanges(changeList);
            this._duringSync = false;
        }
        &#x2F;&#x2F; Else, Master editor:
        &#x2F;&#x2F; we&#39;re the ground truth; nothing to do since Document change is just echoing our
        &#x2F;&#x2F; editor changes
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleDocumentDeleted</h4>

    
    <div class="description"><p>Responds to the Document&#39;s underlying file being deleted. The Document is now basically dead,
so we must close.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleDocumentDeleted = function (event) {
        &#x2F;&#x2F; Pass the delete event along as the cause (needed in MultiRangeInlineEditor)
        $(this).triggerHandler(&quot;lostContent&quot;, [event]);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleDocumentLanguageChanged</h4>

    
    <div class="description"><p>Responds to language changes, for instance when the file extension is changed.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleDocumentLanguageChanged = function (event) {
        this._codeMirror.setOption(&quot;mode&quot;, this._getModeFromDocument());
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleEditorChange</h4>

    
    <div class="description"><p>Responds to changes in the CodeMirror editor&#39;s text, syncing the changes to the Document.
There are several cases where we want to ignore a CodeMirror change:</p>
<ul>
<li>if we&#39;re the master editor, editor changes can be ignored because Document is already listening
for our changes</li>
<li>if we&#39;re a secondary editor, editor changes should be ignored if they were caused by us reacting
to a Document change</li>
</ul>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleEditorChange = function (changeList) {
        &#x2F;&#x2F; we&#39;re currently syncing from the Document, so don&#39;t echo back TO the Document
        if (this._duringSync) {
            return;
        }
        
        &#x2F;&#x2F; Secondary editor: force creation of &quot;master&quot; editor backing the model, if doesn&#39;t exist yet
        this.document._ensureMasterEditor();
        
        if (this.document._masterEditor !== this) {
            &#x2F;&#x2F; Secondary editor:
            &#x2F;&#x2F; we&#39;re not the ground truth; if we got here, this was a real editor change (not a
            &#x2F;&#x2F; sync from the real ground truth), so we need to sync from us into the document
            &#x2F;&#x2F; (which will directly push the change into the master editor).
            &#x2F;&#x2F; FUTURE: Technically we should add a replaceRange() method to Document and go through
            &#x2F;&#x2F; that instead of talking to its master editor directly. It&#39;s not clear yet exactly
            &#x2F;&#x2F; what the right Document API would be, though.
            this._duringSync = true;
            this.document._masterEditor._applyChanges(changeList);
            this._duringSync = false;
            
            &#x2F;&#x2F; Update which lines are hidden inside our editor, since we&#39;re not going to go through
            &#x2F;&#x2F; _applyChanges() in our own editor.
            this._updateHiddenLines();
        }
        &#x2F;&#x2F; Else, Master editor:
        &#x2F;&#x2F; we&#39;re the ground truth; nothing else to do, since Document listens directly to us
        &#x2F;&#x2F; note: this change might have been a real edit made by the user, OR this might have
        &#x2F;&#x2F; been a change synced from another editor
        
        &#x2F;&#x2F; The &quot;editorChange&quot; event is mostly for the use of the CodeHintManager.
        &#x2F;&#x2F; It differs from the normal &quot;change&quot; event, that it&#39;s actually publicly usable,
        &#x2F;&#x2F; whereas the &quot;change&quot; event should be listened to on the document. Also the
        &#x2F;&#x2F; Editor dispatches a change event before this event is dispatched, because
        &#x2F;&#x2F; CodeHintManager needs to hook in here when other things are already done.
        $(this).triggerHandler(&quot;editorChange&quot;, [this, changeList]);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleKeypressEvents</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>event</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">Event</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleKeypressEvents = function (event) {
        this._checkElectricChars(event);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleSoftTabNavigation</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>direction</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Direction of movement: 1 for forward, -1 for backward</dd>
    <dt>functionName</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>name of the CodeMirror function to call if we handle the key</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleSoftTabNavigation = function (direction, functionName) {
        var instance = this._codeMirror,
            overallJump = null;
        
        if (!instance.getOption(&quot;indentWithTabs&quot;) &amp;&amp; PreferencesManager.get(SOFT_TABS)) {
            var indentUnit = instance.getOption(&quot;indentUnit&quot;);
            
            _.each(this.getSelections(), function (sel) {
                if (CodeMirror.cmpPos(sel.start, sel.end) !== 0) {
                    &#x2F;&#x2F; This is a range - it will just collapse&#x2F;be deleted regardless of the jump we set, so
                    &#x2F;&#x2F; we can just ignore it and continue. (We don&#39;t want to return false in this case since
                    &#x2F;&#x2F; we want to keep looking at other ranges.)
                    return;
                }
                
                var cursor = sel.start,
                    jump   = cursor.ch % indentUnit,
                    line   = instance.getLine(cursor.line);

                &#x2F;&#x2F; Don&#39;t do any soft tab handling if there are non-whitespace characters before the cursor in
                &#x2F;&#x2F; any of the selections.
                if (line.substr(0, cursor.ch).search(&#x2F;\S&#x2F;) !== -1) {
                    jump = null;
                } else if (direction === 1) { &#x2F;&#x2F; right
                    jump = indentUnit - jump;

                    &#x2F;&#x2F; Don&#39;t jump if it would take us past the end of the line, or if there are
                    &#x2F;&#x2F; non-whitespace characters within the jump distance.
                    if (cursor.ch + jump &gt; line.length || line.substr(cursor.ch, jump).search(&#x2F;\S&#x2F;) !== -1) {
                        jump = null;
                    }
                } else { &#x2F;&#x2F; left
                    &#x2F;&#x2F; If we are on the tab boundary, jump by the full amount,
                    &#x2F;&#x2F; but not beyond the start of the line.
                    if (jump === 0) {
                        jump = indentUnit;
                    }
                    if (cursor.ch - jump &lt; 0) {
                        jump = null;
                    } else {
                        &#x2F;&#x2F; We&#39;re moving left, so negate the jump.
                        jump = -jump;
                    }
                }

                &#x2F;&#x2F; Did we calculate a jump, and is this jump value either the first one or 
                &#x2F;&#x2F; consistent with all the other jumps? If so, we&#39;re good. Otherwise, bail 
                &#x2F;&#x2F; out of the foreach, since as soon as we hit an inconsistent jump we don&#39;t
                &#x2F;&#x2F; have to look any further.
                if (jump !== null &amp;&amp;
                        (overallJump === null || overallJump === jump)) {
                    overallJump = jump;
                } else {
                    overallJump = null;
                    return false;
                }
            });
        }
        
        if (overallJump === null) {
            &#x2F;&#x2F; Just do the default move, which is one char in the given direction.
            overallJump = direction;
        }
        instance[functionName](overallJump, &quot;char&quot;);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_handleTabKey</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>instance</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">CodeMirror</dd>
    <dd>CodeMirror instance.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._handleTabKey = function () {
        &#x2F;&#x2F; Tab key handling is done as follows:
        &#x2F;&#x2F; 1. If any of the selections are multiline, just add one indent level to the 
        &#x2F;&#x2F;    beginning of all lines that intersect any selection.
        &#x2F;&#x2F; 2. Otherwise, if any of the selections is a cursor or single-line range that 
        &#x2F;&#x2F;    ends at or after the first non-whitespace character in a line:
        &#x2F;&#x2F;    - if indentation is set to tabs, just insert a hard tab before each selection.
        &#x2F;&#x2F;    - if indentation is set to spaces, insert the appropriate number of spaces before
        &#x2F;&#x2F;      each selection to get to its next soft tab stop.
        &#x2F;&#x2F; 3. Otherwise (all selections are cursors or single-line, and are in the whitespace 
        &#x2F;&#x2F;    before their respective lines), try to autoindent each line based on the mode.
        &#x2F;&#x2F;    If none of the cursors moved and no space was added, then add one indent level
        &#x2F;&#x2F;    to the beginning of all lines.
        
        &#x2F;&#x2F; Note that in case 2, we do the &quot;dumb&quot; insertion even if the cursor is immediately
        &#x2F;&#x2F; before the first non-whitespace character in a line. It might seem more convenient
        &#x2F;&#x2F; to do autoindent in that case. However, the problem is if that line is already
        &#x2F;&#x2F; indented past its &quot;proper&quot; location. In that case, we don&#39;t want Tab to
        &#x2F;&#x2F; *outdent* the line. If we had more control over the autoindent algorithm or
        &#x2F;&#x2F; implemented it ourselves, we could handle that case separately.

        var instance = this._codeMirror,
            selectionType = &quot;indentAuto&quot;,
            selections = this.getSelections();

        _.each(selections, function (sel) {
            if (sel.start.line !== sel.end.line) {
                &#x2F;&#x2F; Case 1 - we found a multiline selection. We can bail as soon as we find one of these.
                selectionType = &quot;indentAtBeginning&quot;;
                return false;
            } else if (sel.end.ch &gt; 0 &amp;&amp; sel.end.ch &gt;= instance.getLine(sel.end.line).search(&#x2F;\S&#x2F;)) {
                &#x2F;&#x2F; Case 2 - we found a selection that ends at or after the first non-whitespace
                &#x2F;&#x2F; character on the line. We need to keep looking in case we find a later multiline
                &#x2F;&#x2F; selection though.
                selectionType = &quot;indentAtSelection&quot;;
            }
        });
        
        switch (selectionType) {
        case &quot;indentAtBeginning&quot;:
            &#x2F;&#x2F; Case 1
            CodeMirror.commands.indentMore(instance);
            break;
                
        case &quot;indentAtSelection&quot;:
            &#x2F;&#x2F; Case 2
            this._addIndentAtEachSelection(selections);
            break;
                
        case &quot;indentAuto&quot;:
            &#x2F;&#x2F; Case 3
            this._autoIndentEachSelection(selections);
            break;
        }
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_hideLines</h4>

    
    <div class="description"><p>Hides the specified line number in the editor</p>
</div>
    
<dl>
    <dt>line</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">from</dd>
    <dd>to start hiding from (inclusive)</dd>
    <dt>line</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">to</dd>
    <dd>to end hiding at (exclusive)</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">TextMarker</dd>
    <dd>The CodeMirror mark object that's hiding the lines</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._hideLines = function (from, to) {
        if (to &lt;= from) {
            return;
        }
        
        &#x2F;&#x2F; We set clearWhenEmpty: false so that if there&#39;s a blank line at the beginning or end of
        &#x2F;&#x2F; the document, and that&#39;s the only hidden line, we can still actually hide it. Doing so
        &#x2F;&#x2F; requires us to create a 0-length marked span, which would ordinarily be cleaned up by CM
        &#x2F;&#x2F; if clearWithEmpty is true. See https:&#x2F;&#x2F;groups.google.com&#x2F;forum&#x2F;#!topic&#x2F;codemirror&#x2F;RB8VNF8ow2w
        var value = this._codeMirror.markText(
            {line: from, ch: 0},
            {line: to - 1, ch: this._codeMirror.getLine(to - 1).length},
            {collapsed: true, inclusiveLeft: true, inclusiveRight: true, clearWhenEmpty: false}
        );
        
        return value;
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_installEditorListeners</h4>

    
    <div class="description"><p>Install event handlers on the CodeMirror instance, translating them into
jQuery events on the Editor instance.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._installEditorListeners = function () {
        var self = this;
        
        &#x2F;&#x2F; Redispatch these CodeMirror key events as jQuery events
        function _onKeyEvent(instance, event) {
            $(self).triggerHandler(&quot;keyEvent&quot;, [self, event]);  &#x2F;&#x2F; deprecated
            $(self).triggerHandler(event.type, [self, event]);
            return event.defaultPrevented;   &#x2F;&#x2F; false tells CodeMirror we didn&#39;t eat the event
        }
        this._codeMirror.on(&quot;keydown&quot;,  _onKeyEvent);
        this._codeMirror.on(&quot;keypress&quot;, _onKeyEvent);
        this._codeMirror.on(&quot;keyup&quot;,    _onKeyEvent);
        
        &#x2F;&#x2F; FUTURE: if this list grows longer, consider making this a more generic mapping
        &#x2F;&#x2F; NOTE: change is a &quot;private&quot; event--others shouldn&#39;t listen to it on Editor, only on
        &#x2F;&#x2F; Document
        &#x2F;&#x2F; Also, note that we use the new &quot;changes&quot; event in v4, which provides an array of
        &#x2F;&#x2F; change objects. Our own event is still called just &quot;change&quot;.
        this._codeMirror.on(&quot;changes&quot;, function (instance, changeList) {
            $(self).triggerHandler(&quot;change&quot;, [self, changeList]);
        });
        this._codeMirror.on(&quot;beforeChange&quot;, function (instance, changeObj) {
            $(self).triggerHandler(&quot;beforeChange&quot;, [self, changeObj]);
        });
        this._codeMirror.on(&quot;cursorActivity&quot;, function (instance) {
            $(self).triggerHandler(&quot;cursorActivity&quot;, [self]);
        });
        this._codeMirror.on(&quot;scroll&quot;, function (instance) {
            &#x2F;&#x2F; If this editor is visible, close all dropdowns on scroll.
            &#x2F;&#x2F; (We don&#39;t want to do this if we&#39;re just scrolling in a non-visible editor
            &#x2F;&#x2F; in response to some document change event.)
            if (self.isFullyVisible()) {
                Menus.closeAll();
            }

            $(self).triggerHandler(&quot;scroll&quot;, [self]);
        });

        &#x2F;&#x2F; Convert CodeMirror onFocus events to EditorManager activeEditorChanged
        this._codeMirror.on(&quot;focus&quot;, function () {
            self._focused = true;
            $(self).triggerHandler(&quot;focus&quot;, [self]);
        });
        
        this._codeMirror.on(&quot;blur&quot;, function () {
            self._focused = false;
            $(self).triggerHandler(&quot;blur&quot;, [self]);
        });

        this._codeMirror.on(&quot;update&quot;, function (instance) {
            $(self).triggerHandler(&quot;update&quot;, [self]);
        });
        this._codeMirror.on(&quot;overwriteToggle&quot;, function (instance, newstate) {
            $(self).triggerHandler(&quot;overwriteToggle&quot;, [self, newstate]);
        });
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_removeInlineWidgetFromList</h4>

    
    <div class="description"><p>Cleans up the given inline widget from our internal list of widgets. It&#39;s okay
to call this multiple times for the same widget--it will just do nothing if
the widget has already been removed.</p>
</div>
    
<dl>
    <dt>inlineWidget</dt>
    <dd class="label label-info pull-left">InlineWidget</dd>
    <dd>an inline widget.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._removeInlineWidgetFromList = function (inlineWidget) {
        var l = this._inlineWidgets.length,
            i;
        for (i = 0; i &lt; l; i++) {
            if (this._inlineWidgets[i] === inlineWidget) {
                this._inlineWidgets.splice(i, 1);
                break;
            }
        }
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_removeInlineWidgetInternal</h4>

    
    <div class="description"><p>Removes the inline widget from the editor and notifies it to clean itself up.</p>
</div>
    
<dl>
    <dt>inlineWidget</dt>
    <dd class="label label-info pull-left">InlineWidget</dd>
    <dd>an inline widget.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._removeInlineWidgetInternal = function (inlineWidget) {
        if (!inlineWidget.isClosed) {
            this._removeInlineWidgetFromList(inlineWidget);
            inlineWidget.onClosed();
            inlineWidget.isClosed = true;
        }
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_resetText</h4>

    
    <div class="description"><p>Sets the contents of the editor, clears the undo/redo history and marks the document clean. Dispatches a change event.
Semi-private: only Document should call this.</p>
</div>
    
<dl>
    <dt>text</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._resetText = function (text) {
        var perfTimerName = PerfUtils.markStart(&quot;Editor._resetText()\t&quot; + (!this.document || this.document.file.fullPath));

        var cursorPos = this.getCursorPos(),
            scrollPos = this.getScrollPos();
        
        &#x2F;&#x2F; This *will* fire a change event, but we clear the undo immediately afterward
        this._codeMirror.setValue(text);
        
        &#x2F;&#x2F; Make sure we can&#39;t undo back to the empty state before setValue(), and mark
        &#x2F;&#x2F; the document clean.
        this._codeMirror.clearHistory();
        this._codeMirror.markClean();
        
        &#x2F;&#x2F; restore cursor and scroll positions
        this.setCursorPos(cursorPos);
        this.setScrollPos(scrollPos.x, scrollPos.y);

        PerfUtils.addMeasurement(perfTimerName);
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_updateHiddenLines</h4>

    
    <div class="description"><p>Ensures that the lines that are actually hidden in the inline editor correspond to
the desired visible range.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._updateHiddenLines = function () {
        if (this._visibleRange) {
            var cm = this._codeMirror,
                self = this;
            cm.operation(function () {
                self._hideMarks.forEach(function (mark) {
                    if (mark) {
                        mark.clear();
                    }
                });
                self._hideMarks = [];
                self._hideMarks.push(self._hideLines(0, self._visibleRange.startLine));
                self._hideMarks.push(self._hideLines(self._visibleRange.endLine + 1, self.lineCount()));
            });
        }
    };
    
    Editor.prototype._applyChanges = function (changeList) {
        &#x2F;&#x2F; _visibleRange has already updated via its own Document listener. See if this change caused
        &#x2F;&#x2F; it to lose sync. If so, our whole view is stale - signal our owner to close us.
        if (this._visibleRange) {
            if (this._visibleRange.startLine === null || this._visibleRange.endLine === null) {
                $(this).triggerHandler(&quot;lostContent&quot;);
                return;
            }
        }

        &#x2F;&#x2F; Apply text changes to CodeMirror editor
        var cm = this._codeMirror;
        cm.operation(function () {
            var change, newText, i;
            for (i = 0; i &lt; changeList.length; i++) {
                change = changeList[i];
                newText = change.text.join(&#39;\n&#39;);
                if (!change.from || !change.to) {
                    if (change.from || change.to) {
                        console.error(&quot;Change record received with only one end undefined--replacing entire text&quot;);
                    }
                    cm.setValue(newText);
                } else {
                    cm.replaceRange(newText, change.from, change.to, change.origin);
                }
                
            }
        });
        
        &#x2F;&#x2F; The update above may have inserted new lines - must hide any that fall outside our range
        this._updateHiddenLines();
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_updateOption</h4>

    
    <div class="description"></div>
    
<dl>
    <dt>prefName</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>Name of the preference to visibly update</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._updateOption = function (prefName) {
        var oldValue = this._currentOptions[prefName],
            newValue = this._getOption(prefName);
        
        if (oldValue !== newValue) {
            this._currentOptions[prefName] = newValue;
            
            if (prefName === USE_TAB_CHAR) {
                this._codeMirror.setOption(cmOptions[prefName], newValue);
                this._codeMirror.setOption(&quot;indentUnit&quot;, newValue === true ?
                                           this._currentOptions[TAB_SIZE] :
                                           this._currentOptions[SPACE_UNITS]
                                          );
            } else if (prefName === STYLE_ACTIVE_LINE) {
                this._updateStyleActiveLine();
            } else if (prefName === SCROLL_PAST_END &amp;&amp; this._visibleRange) {
                &#x2F;&#x2F; Do not apply this option to inline editors
                return;
            } else if (prefName === SHOW_LINE_NUMBERS) {
                Editor._toggleLinePadding(!newValue);
                this._codeMirror.setOption(cmOptions[SHOW_LINE_NUMBERS], newValue);
                this.refreshAll();
            } else {
                this._codeMirror.setOption(cmOptions[prefName], newValue);
            }
            
            $(this).triggerHandler(&quot;optionChange&quot;, [prefName, newValue]);
        }
    };</code></pre></div><div class="member private">

<span class="pull-right scope">
    Private
    
</span>
    <h4>_updateStyleActiveLine</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype._updateStyleActiveLine = function () {
        if (this.hasSelection()) {
            if (this._codeMirror.getOption(&quot;styleActiveLine&quot;)) {
                this._codeMirror.setOption(&quot;styleActiveLine&quot;, false);
            }
        } else {
            this._codeMirror.setOption(&quot;styleActiveLine&quot;, this._currentOptions[STYLE_ACTIVE_LINE]);
        }
    };
    
    &#x2F;&#x2F; Global settings that affect Editor instances that share the same preference locations</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>addInlineWidget</h4>

    
    <div class="description"><p>Adds an inline widget below the given line. If any inline widget was already open for that
line, it is closed without warning.</p>
</div>
    
<dl>
    <dt>pos</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line:number, ch:number}</dd>
    <dd>Position in text to anchor the inline.</dd>
    <dt>inlineWidget</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">InlineWidget</dd>
    <dd>The widget to add.</dd>
    <dt>scrollLineIntoView</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Scrolls the associated line into view. Default true.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">$.Promise</dd>
    <dd>A promise object that is resolved when the widget has been added (but might still be animating open). Never rejected.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.addInlineWidget = function (pos, inlineWidget, scrollLineIntoView) {
        var self = this,
            queue = this._inlineWidgetQueues[pos.line],
            deferred = new $.Deferred();
        if (!queue) {
            queue = new Async.PromiseQueue();
            this._inlineWidgetQueues[pos.line] = queue;
        }
        queue.add(function () {
            self._addInlineWidgetInternal(pos, inlineWidget, scrollLineIntoView, deferred);
            return deferred.promise();
        });
        return deferred.promise();
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>centerOnCursor</h4>

    
    <div class="description"><p>Scrolls the editor viewport to vertically center the line with the cursor,
but only if the cursor is currently near the edges of the viewport or
entirely outside the viewport.</p>
<p>This does not alter the horizontal scroll position.</p>
</div>
    
<dl>
    <dt>centerOptions</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Option value, or 0 for no options; one of the BOUNDARY_* constants above.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.centerOnCursor = function (centerOptions) {
        var $scrollerElement = $(this.getScrollerElement());
        var editorHeight = $scrollerElement.height();
        
        &#x2F;&#x2F; we need to make adjustments for the statusbar&#39;s padding on the bottom and the menu bar on top.
        var statusBarHeight = $scrollerElement.outerHeight() - editorHeight;
        var menuBarHeight = $scrollerElement.offset().top;
        
        var documentCursorPosition = this._codeMirror.cursorCoords(null, &quot;local&quot;).bottom;
        var screenCursorPosition = this._codeMirror.cursorCoords(null, &quot;page&quot;).bottom - menuBarHeight;
        
        &#x2F;&#x2F; If the cursor is already reasonably centered, we won&#39;t
        &#x2F;&#x2F; make any change. &quot;Reasonably centered&quot; is defined as
        &#x2F;&#x2F; not being within CENTERING_MARGIN of the top or bottom
        &#x2F;&#x2F; of the editor (where CENTERING_MARGIN is a percentage
        &#x2F;&#x2F; of the editor height).
        &#x2F;&#x2F; For finding the first item (i.e. find while typing), do
        &#x2F;&#x2F; not center if hit is in first half of screen because this
        &#x2F;&#x2F; appears to be an unnecesary scroll.
        if ((_checkTopBoundary(centerOptions) &amp;&amp; (screenCursorPosition &lt; editorHeight * CENTERING_MARGIN)) ||
                (_checkBottomBoundary(centerOptions) &amp;&amp; (screenCursorPosition &gt; editorHeight * (1 - CENTERING_MARGIN)))) {

            var pos = documentCursorPosition - editorHeight &#x2F; 2 + statusBarHeight;
            var info = this._codeMirror.getScrollInfo();
            pos = Math.min(Math.max(pos, 0), (info.height - info.clientHeight));
            this.setScrollPos(null, pos);
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>convertToLineSelections</h4>

    
    <div class="description"><p>Takes the given selections, and expands each selection so it encompasses whole lines. Merges
adjacent line selections together. Keeps track of each original selection associated with a given
line selection (there might be multiple if individual selections were merged into a single line selection).
Useful for doing multiple-selection-aware line edits.</p>
</div>
    
<dl>
    <dt>selections</dt>
    <dd class="label label-info pull-left">Array.&lt;{start:{line:number,ch:number},end:{line:number,ch:number},reversed:boolean,primary:boolean}&gt;</dd>
    <dd>The selections to expand.</dd>
    <dt>options</dt>
    <dd class="label label-info pull-left">{expandEndAtStartOfLine: boolean,mergeAdjacent: boolean}</dd>
    <dd>expandEndAtStartOfLine: true if a range selection that ends at the beginning of a line should be expanded to encompass the line. Default false. mergeAdjacent: true if adjacent line ranges should be merged. Default true.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">Array.&lt;{selectionForEdit: {start:{line:number,ch:number},end:{line:number,ch:number},reversed:boolean,primary:boolean},selectionsToTrack: Array.&lt;{start:{line:number,ch:number},end:{line:number,ch:number},reversed:boolean,primary:boolean}&gt;}&gt;</dd>
    <dd>The combined line selections. For each selection, `selectionForEdit` is the line selection, and `selectionsToTrack` is the set of original selections that combined to make up the given line selection. Note that the selectionsToTrack will include the original objects passed in `selections`, so if it is later mutated the original passed-in selections will be mutated as well.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.convertToLineSelections = function (selections, options) {
        var self = this;
        options = options || {};
        _.defaults(options, { expandEndAtStartOfLine: false, mergeAdjacent: true });
        
        &#x2F;&#x2F; Combine adjacent lines with selections so they don&#39;t collide with each other, as they would
        &#x2F;&#x2F; if we did them individually.
        var combinedSelections = [], prevSel;
        _.each(selections, function (sel) {
            var newSel = _.cloneDeep(sel);
            
            &#x2F;&#x2F; Adjust selection to encompass whole lines.
            newSel.start.ch = 0;
            &#x2F;&#x2F; The end of the selection becomes the start of the next line, if it isn&#39;t already
            &#x2F;&#x2F; or if expandEndAtStartOfLine is set.
            var hasSelection = (newSel.start.line !== newSel.end.line) || (newSel.start.ch !== newSel.end.ch);
            if (options.expandEndAtStartOfLine || !hasSelection || newSel.end.ch !== 0) {
                newSel.end = {line: newSel.end.line + 1, ch: 0};
            }

            &#x2F;&#x2F; If the start of the new selection is within the range of the previous (expanded) selection, merge
            &#x2F;&#x2F; the two selections together, but keep track of all the original selections that were related to this
            &#x2F;&#x2F; selection, so they can be properly adjusted. (We only have to check for the start being inside the previous
            &#x2F;&#x2F; range - it can&#39;t be before it because the selections started out sorted.)
            if (prevSel &amp;&amp; self.posWithinRange(newSel.start, prevSel.selectionForEdit.start, prevSel.selectionForEdit.end, options.mergeAdjacent)) {
                prevSel.selectionForEdit.end.line = newSel.end.line;
                prevSel.selectionsToTrack.push(sel);
            } else {
                prevSel = {selectionForEdit: newSel, selectionsToTrack: [sel]};
                combinedSelections.push(prevSel);
            }
        });
        return combinedSelections;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>destroy</h4>

    
    <div class="description"><p>Removes this editor from the DOM and detaches from the Document. If this is the &quot;master&quot;
Editor that is secretly providing the Document&#39;s backing state, then the Document reverts to
a read-only string-backed mode.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.destroy = function () {
        &#x2F;&#x2F; CodeMirror docs for getWrapperElement() say all you have to do is &quot;Remove this from your
        &#x2F;&#x2F; tree to delete an editor instance.&quot;
        $(this.getRootElement()).remove();
        
        _instances.splice(_instances.indexOf(this), 1);
        
        &#x2F;&#x2F; Disconnect from Document
        this.document.releaseRef();
        $(this.document).off(&quot;change&quot;, this._handleDocumentChange);
        $(this.document).off(&quot;deleted&quot;, this._handleDocumentDeleted);
        $(this.document).off(&quot;languageChanged&quot;, this._handleDocumentLanguageChanged);
        
        if (this._visibleRange) {   &#x2F;&#x2F; TextRange also refs the Document
            this._visibleRange.dispose();
        }
        
        &#x2F;&#x2F; If we&#39;re the Document&#39;s master editor, disconnecting from it has special meaning
        if (this.document._masterEditor === this) {
            this.document._makeNonEditable();
        }
        
        &#x2F;&#x2F; Destroying us destroys any inline widgets we&#39;re hosting. Make sure their closeCallbacks
        &#x2F;&#x2F; run, at least, since they may also need to release Document refs
        var self = this;
        this._inlineWidgets.forEach(function (inlineWidget) {
            self._removeInlineWidgetInternal(inlineWidget);
        });
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>displayErrorMessageAtCursor</h4>

    
    <div class="description"><p>Display temporary popover message at current cursor position. Display message above
cursor if space allows, otherwise below.</p>
</div>
    
<dl>
    <dt>errorMsg</dt>
    <dd class="label label-info pull-left">string</dd>
    <dd>Error message to display</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.displayErrorMessageAtCursor = function (errorMsg) {
        var arrowBelow, cursorPos, cursorCoord, popoverRect,
            top, left, clip, arrowCenter, arrowLeft,
            self = this,
            $editorHolder = $(&quot;#editor-holder&quot;),
            POPOVER_MARGIN = 10,
            POPOVER_ARROW_HALF_WIDTH = 10,
            POPOVER_ARROW_HALF_BASE = POPOVER_ARROW_HALF_WIDTH + 3; &#x2F;&#x2F; 3 is border radius

        function _removeListeners() {
            $(self).off(&quot;.msgbox&quot;);
        }

        &#x2F;&#x2F; PopUpManager.removePopUp() callback
        function _clearMessagePopover() {
            if (self._$messagePopover &amp;&amp; self._$messagePopover.length &gt; 0) {
                &#x2F;&#x2F; self._$messagePopover.remove() is done by PopUpManager
                self._$messagePopover = null;
            }
            _removeListeners();
        }
        
        &#x2F;&#x2F; PopUpManager.removePopUp() is called either directly by this closure, or by
        &#x2F;&#x2F; PopUpManager as a result of another popup being invoked.
        function _removeMessagePopover() {
            PopUpManager.removePopUp(self._$messagePopover);
        }

        function _addListeners() {
            $(self)
                .on(&quot;blur.msgbox&quot;,           _removeMessagePopover)
                .on(&quot;change.msgbox&quot;,         _removeMessagePopover)
                .on(&quot;cursorActivity.msgbox&quot;, _removeMessagePopover)
                .on(&quot;update.msgbox&quot;,         _removeMessagePopover);
        }

        &#x2F;&#x2F; Only 1 message at a time
        if (this._$messagePopover) {
            _removeMessagePopover();
        }
        
        &#x2F;&#x2F; Make sure cursor is in view
        cursorPos = this.getCursorPos();
        this._codeMirror.scrollIntoView(cursorPos);
        
        &#x2F;&#x2F; Determine if arrow is above or below
        cursorCoord = this._codeMirror.charCoords(cursorPos);
        
        &#x2F;&#x2F; Assume popover height is max of 2 lines
        arrowBelow = (cursorCoord.top &gt; 100);
        
        &#x2F;&#x2F; Text is dynamic, so build popover first so we can measure final width
        this._$messagePopover = $(&quot;&lt;div&#x2F;&gt;&quot;).addClass(&quot;popover-message&quot;).appendTo($(&quot;body&quot;));
        if (!arrowBelow) {
            $(&quot;&lt;div&#x2F;&gt;&quot;).addClass(&quot;arrowAbove&quot;).appendTo(this._$messagePopover);
        }
        $(&quot;&lt;div&#x2F;&gt;&quot;).addClass(&quot;text&quot;).appendTo(this._$messagePopover).html(errorMsg);
        if (arrowBelow) {
            $(&quot;&lt;div&#x2F;&gt;&quot;).addClass(&quot;arrowBelow&quot;).appendTo(this._$messagePopover);
        }
        
        &#x2F;&#x2F; Estimate where to position popover.
        top = (arrowBelow) ? cursorCoord.top - this._$messagePopover.height() - POPOVER_MARGIN
                           : cursorCoord.bottom + POPOVER_MARGIN;
        left = cursorCoord.left - (this._$messagePopover.width() &#x2F; 2);
        
        popoverRect = {
            top:    top,
            left:   left,
            height: this._$messagePopover.height(),
            width:  this._$messagePopover.width()
        };
        
        &#x2F;&#x2F; See if popover is clipped on any side
        clip = ViewUtils.getElementClipSize($editorHolder, popoverRect);

        &#x2F;&#x2F; Prevent horizontal clipping
        if (clip.left &gt; 0) {
            left += clip.left;
        } else if (clip.right &gt; 0) {
            left -= clip.right;
        }
        
        &#x2F;&#x2F; Popover text and arrow are positioned individually
        this._$messagePopover.css({&quot;top&quot;: top, &quot;left&quot;: left});
        
        &#x2F;&#x2F; Position popover arrow centered over&#x2F;under cursor...
        arrowCenter = cursorCoord.left - left;

        &#x2F;&#x2F; ... but don&#39;t let it slide off text box
        arrowCenter = Math.min(popoverRect.width - POPOVER_ARROW_HALF_BASE,
                               Math.max(arrowCenter, POPOVER_ARROW_HALF_BASE));

        arrowLeft = arrowCenter - POPOVER_ARROW_HALF_WIDTH;
        if (arrowBelow) {
            this._$messagePopover.find(&quot;.arrowBelow&quot;).css({&quot;margin-left&quot;: arrowLeft});
        } else {
            this._$messagePopover.find(&quot;.arrowAbove&quot;).css({&quot;margin-left&quot;: arrowLeft});
        }

        &#x2F;&#x2F; Add listeners
        PopUpManager.addPopUp(this._$messagePopover, _clearMessagePopover, true);
        _addListeners();

        &#x2F;&#x2F; Animate open
        AnimationUtils.animateUsingClass(this._$messagePopover[0], &quot;animateOpen&quot;).done(function () {
            &#x2F;&#x2F; Make sure we still have a popover
            if (self._$messagePopover &amp;&amp; self._$messagePopover.length &gt; 0) {
                self._$messagePopover.addClass(&quot;open&quot;);

                &#x2F;&#x2F; Don&#39;t add scroll listeners until open so we don&#39;t get event
                &#x2F;&#x2F; from scrolling cursor into view
                $(self).on(&quot;scroll.msgbox&quot;, _removeMessagePopover);

                &#x2F;&#x2F; Animate closed -- which includes delay to show message
                AnimationUtils.animateUsingClass(self._$messagePopover[0], &quot;animateClose&quot;, 6000)
                    .done(_removeMessagePopover);
            }
        });
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>focus</h4>

    
    <div class="description"><p>Gives focus to the editor control</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.focus = function () {
        &#x2F;&#x2F; Focusing an editor synchronously triggers focus&#x2F;blur handlers. If a blur handler attemps to focus
        &#x2F;&#x2F; another editor, we&#39;ll put CM in a bad state (because CM assumes programmatically focusing itself
        &#x2F;&#x2F; will always succeed, and if you&#39;re in the middle of another focus change that appears to be untrue).
        &#x2F;&#x2F; So instead, we simply ignore reentrant focus attempts.
        &#x2F;&#x2F; See bug #2951 for an example of this happening and badly hosing things.
        if (_duringFocus) {
            return;
        }
        
        _duringFocus = true;
        try {
            this._codeMirror.focus();
        } finally {
            _duringFocus = false;
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getCharIndexForColumn</h4>

    
    <div class="description"><p>Returns the string-based pos for a given display column (zero-based) in given line. Differs from column
only when the line contains preceding \t chars. Result depends on the current tab size setting.</p>
</div>
    
<dl>
    <dt>lineNum</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Line number</dd>
    <dt>column</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Display column number</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getCharIndexForColumn = function (lineNum, column) {
        var line    = this._codeMirror.getLine(lineNum),
            tabSize = null,
            iCol    = 0,
            i;

        for (i = 0; iCol &lt; column; i++) {
            if (line[i] === &#39;\t&#39;) {
                if (tabSize === null) {
                    tabSize = Editor.getTabSize();
                }
                if (tabSize &gt; 0) {
                    iCol += (tabSize - (iCol % tabSize));
                }
            } else {
                iCol++;
            }
        }
        return i;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getColOffset</h4>

    
    <div class="description"><p>Returns the display column (zero-based) for a given string-based pos. Differs from pos.ch only
when the line contains preceding \t chars. Result depends on the current tab size setting.</p>
</div>
    
<dl>
    <dt>pos</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line:number, ch:number}</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getColOffset = function (pos) {
        var line    = this._codeMirror.getRange({line: pos.line, ch: 0}, pos),
            tabSize = null,
            column  = 0,
            i;

        for (i = 0; i &lt; line.length; i++) {
            if (line[i] === &#39;\t&#39;) {
                if (tabSize === null) {
                    tabSize = Editor.getTabSize();
                }
                if (tabSize &gt; 0) {
                    column += (tabSize - (column % tabSize));
                }
            } else {
                column++;
            }
        }
        return column;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getCursorPos</h4>

    
    <div class="description"><p>Gets the current cursor position within the editor.</p>
</div>
    
<dl>
    <dt>expandTabs</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>If true, return the actual visual column number instead of the character offset in the "ch" property.</dd>
    <dt>which</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>Optional string indicating which end of the selection to return. It may be "start", "end", "head" (the side of the selection that moves when you press shift+arrow), or "anchor" (the fixed side of the selection). Omitting the argument is the same as passing "head". A {line, ch} object will be returned.)</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!{line:number,</dd>
    <dd>ch:number}</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getCursorPos = function (expandTabs, which) {
        &#x2F;&#x2F; Translate &quot;start&quot; and &quot;end&quot; to the official CM names (it actually
        &#x2F;&#x2F; supports them as-is, but that isn&#39;t documented and we don&#39;t want to
        &#x2F;&#x2F; rely on it).
        if (which === &quot;start&quot;) {
            which = &quot;from&quot;;
        } else if (which === &quot;end&quot;) {
            which = &quot;to&quot;;
        }
        var cursor = _copyPos(this._codeMirror.getCursor(which));
        
        if (expandTabs) {
            cursor.ch = this.getColOffset(cursor);
        }
        return cursor;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getFirstVisibleLine</h4>

    
    <div class="description"><p>Gets the number of the first visible line in the editor.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>The 0-based index of the first visible line.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getFirstVisibleLine = function () {
        return (this._visibleRange ? this._visibleRange.startLine : 0);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getInlineWidgets</h4>

    
    <div class="description"><p>Returns a list of all inline widgets currently open in this editor. Each entry contains the
inline&#39;s id, and the data parameter that was passed to addInlineWidget().</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!Array.&lt;{id:number,data:Object}&gt;</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getInlineWidgets = function () {
        return this._inlineWidgets;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getLastVisibleLine</h4>

    
    <div class="description"><p>Gets the number of the last visible line in the editor.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>The 0-based index of the last visible line.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getLastVisibleLine = function () {
        return (this._visibleRange ? this._visibleRange.endLine : this.lineCount() - 1);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getModeForDocument</h4>

    
    <div class="description"><p>Gets the syntax-highlighting mode for the document.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">Object,String</dd>
    <dd>Object or Name of syntax-highlighting mode; see {@link LanguageManager#getLanguageForPath()} and {@link Language#getMode()}.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getModeForDocument = function () {
        return this._codeMirror.getOption(&quot;mode&quot;);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getModeForRange</h4>

    
    <div class="description"><p>Gets the syntax-highlighting mode for the given range.
Returns null if the mode at the start of the selection differs from the mode at the end -
an <em>approximation</em> of whether the mode is consistent across the whole range (a pattern like
A-B-A would return A as the mode, not null).</p>
</div>
    
<dl>
    <dt>start</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line: number, ch: number}</dd>
    <dd>The start of the range to check.</dd>
    <dt>end</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line: number, ch: number}</dd>
    <dd>The end of the range to check.</dd>
    <dt>knownMixed</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Whether we already know we're in a mixed mode and need to check both the start and end.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">?(Object,string)</dd>
    <dd>Name of syntax-highlighting mode, or object containing a "name" property naming the mode along with configuration options required by the mode. See {@link LanguageManager#getLanguageForPath()} and {@link Language#getMode()}.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getModeForRange = function (start, end, knownMixed) {
        var outerMode = this._codeMirror.getMode(),
            startMode = TokenUtils.getModeAt(this._codeMirror, start),
            endMode = TokenUtils.getModeAt(this._codeMirror, end);
        if (!knownMixed &amp;&amp; outerMode.name === startMode.name) {
            &#x2F;&#x2F; Mode does not vary: just use the editor-wide mode name
            return this._codeMirror.getOption(&quot;mode&quot;);
        } else if (!startMode || !endMode || startMode.name !== endMode.name) {
            return null;
        } else {
            return startMode;
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getModeForSelection</h4>

    
    <div class="description"><p>Gets the syntax-highlighting mode for the current selection or cursor position. (The mode may
vary within one file due to embedded languages, e.g. JS embedded in an HTML script block). See
<code>getModeForRange()</code> for how this is determined for a single selection.</p>
<p>If there are multiple selections, this will return a mode only if all the selections are individually
consistent and resolve to the same mode.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">?(Object,string)</dd>
    <dd>Name of syntax-highlighting mode, or object containing a "name" property naming the mode along with configuration options required by the mode. See {@link LanguageManager#getLanguageForPath()} and {@link Language#getMode()}.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getModeForSelection = function () {
        &#x2F;&#x2F; Check for mixed mode info
        var self        = this,
            sels        = this.getSelections(),
            primarySel  = this.getSelection(),
            outerMode   = this._codeMirror.getMode(),
            startMode   = TokenUtils.getModeAt(this._codeMirror, primarySel.start),
            isMixed     = (outerMode.name !== startMode.name);

        if (isMixed) {
            &#x2F;&#x2F; Shortcut the first check to avoid getModeAt(), which can be expensive
            if (primarySel.start.line !== primarySel.end.line || primarySel.start.ch !== primarySel.end.ch) {
                var endMode = TokenUtils.getModeAt(this._codeMirror, primarySel.end);
                
                if (startMode.name !== endMode.name) {
                    return null;
                }
            }

            &#x2F;&#x2F; If mixed mode, check that mode is the same at start &amp; end of each selection
            var hasMixedSel = _.some(sels, function (sel) {
                if (sels === primarySel) {
                    &#x2F;&#x2F; We already checked this before, so we know it&#39;s not mixed.
                    return false;
                }
                
                var rangeMode = self.getModeForRange(sel.start, sel.end, true);
                return (!rangeMode || rangeMode.name !== startMode.name);
            });
            if (hasMixedSel) {
                return null;
            }

            return startMode.name;
        } else {
            &#x2F;&#x2F; Mode does not vary: just use the editor-wide mode
            return this._codeMirror.getOption(&quot;mode&quot;);
        }
    };
    
    Editor.prototype.getLanguageForSelection = function () {
        return this.document.getLanguage().getLanguageForMode(this.getModeForSelection());
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getRootElement</h4>

    
    <div class="description"><p>Gets the root DOM node of the editor.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!HTMLDivElement</dd>
    <dd>The editor's root DOM node.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getRootElement = function () {
        return this._codeMirror.getWrapperElement();
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getScrollPos</h4>

    
    <div class="description"><p>Returns the current scroll position of the editor.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">{x:number,y:number}</dd>
    <dd>The x,y scroll position in pixels</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getScrollPos = function () {
        var scrollInfo = this._codeMirror.getScrollInfo();
        return { x: scrollInfo.left, y: scrollInfo.top };
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getScrollerElement</h4>

    
    <div class="description"><p>Gets the scroller element from the editor.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!HTMLDivElement</dd>
    <dd>scroller</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getScrollerElement = function () {
        return this._codeMirror.getScrollerElement();
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getSelectedText</h4>

    
    <div class="description"><p>Returns the currently selected text, or &quot;&quot; if no selection. Includes \n if the
selection spans multiple lines (does NOT reflect the Document&#39;s line-endings style). By
default, returns only the contents of the primary selection, unless <code>allSelections</code> is true.</p>
</div>
    
<dl>
    <dt>allSelections</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Whether to return the contents of all selections (separated by newlines) instead of just the primary selection. Default false.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!string</dd>
    <dd>The selected text.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getSelectedText = function (allSelections) {
        if (allSelections) {
            return this._codeMirror.getSelection();
        } else {
            var sel = this.getSelection();
            return this.document.getRange(sel.start, sel.end);
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getSelection</h4>

    
    <div class="description"><p>Gets the current selection; if there is more than one selection, returns the primary selection
(generally the last one made). Start is inclusive, end is exclusive. If there is no selection,
returns the current cursor position as both the start and end of the range (i.e. a selection
of length zero). If <code>reversed</code> is set, then the head of the selection (the end of the selection
that would be changed if the user extended the selection) is before the anchor. </p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!{start:{line:number,ch:number},end:{line:number,ch:number}},reversed:boolean</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getSelection = function () {
        return _normalizeRange(this.getCursorPos(false, &quot;anchor&quot;), this.getCursorPos(false, &quot;head&quot;));
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getSelections</h4>

    
    <div class="description"><p>Returns an array of current selections, nonoverlapping and sorted in document order. 
Each selection is a start/end pair, with the start guaranteed to come before the end.
Cursors are represented as a range whose start is equal to the end.
If <code>reversed</code> is set, then the head of the selection
(the end of the selection that would be changed if the user extended the selection)
is before the anchor. 
If <code>primary</code> is set, then that selection is the primary selection.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">Array.&lt;{start:{line:number,ch:number},end:{line:number,ch:number},reversed:boolean,primary:boolean}&gt;</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getSelections = function () {
        var primarySel = this.getSelection();
        return _.map(this._codeMirror.listSelections(), function (sel) {
            var result = _normalizeRange(sel.anchor, sel.head);
            if (result.start.line === primarySel.start.line &amp;&amp; result.start.ch === primarySel.start.ch &amp;&amp;
                    result.end.line === primarySel.end.line &amp;&amp; result.end.ch === primarySel.end.ch) {
                result.primary = true;
            } else {
                result.primary = false;
            }
            return result;
        });
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getTextHeight</h4>

    
    <div class="description"><p>Returns the current text height of the editor.</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Height of the text in pixels</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getTextHeight = function () {
        return this._codeMirror.defaultTextHeight();
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>getVirtualScrollAreaTop</h4>

    
    <div class="description"><p>Returns the offset of the top of the virtual scroll area relative to the browser window (not the editor
itself). Mainly useful for calculations related to scrollIntoView(), where you&#39;re starting with the
offset() of a child widget (relative to the browser window) and need to figure out how far down it is from
the top of the virtual scroll area (excluding the top padding).</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.getVirtualScrollAreaTop = function () {
        var topPadding = this._getLineSpaceElement().offsetTop, &#x2F;&#x2F; padding within mover
            scroller = this.getScrollerElement();
        return $(scroller).offset().top - scroller.scrollTop + topPadding;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>hasFocus</h4>

    
    <div class="description"><p>Returns true if the editor has focus</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.hasFocus = function () {
        return this._focused;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>hasSelection</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>True if there's a text selection; false if there's just an insertion point</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.hasSelection = function () {
        return this._codeMirror.somethingSelected();
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>indexFromPos</h4>

    
    <div class="description"><p>Given a position, returns its index within the text (assuming \n newlines)</p>
</div>
    
<dl>
    <dt></dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line:number, ch:number}</dd>
    <dd></dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">number</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.indexFromPos = function (coords) {
        return this._codeMirror.indexFromPos(coords);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>isFullyVisible</h4>

    
    <div class="description"><p>Returns true if the editor is fully visible--i.e., is in the DOM, all ancestors are
visible, and has a non-zero width/height.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.isFullyVisible = function () {
        return $(this.getRootElement()).is(&quot;:visible&quot;);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>isLineVisible</h4>

    
    <div class="description"><p>Deterines if line is fully visible.</p>
</div>
    
<dl>
    <dt>zero-based</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>index of the line to test</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true if the line is fully visible, false otherwise</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.isLineVisible = function (line) {
        var coords = this._codeMirror.charCoords({line: line, ch: 0}, &quot;local&quot;),
            scrollInfo = this._codeMirror.getScrollInfo(),
            top = scrollInfo.top,
            bottom = scrollInfo.top + scrollInfo.clientHeight;

        &#x2F;&#x2F; Check top and bottom and return false for partially visible lines.
        return (coords.top &gt;= top &amp;&amp; coords.bottom &lt;= bottom);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>isTextSubset</h4>

    
    <div class="description"></div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>True if editor is not showing the entire text of the document (i.e. an inline editor)</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.isTextSubset = function () {
        return Boolean(this._visibleRange);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>lineCount</h4>

    
    <div class="description"><p>Gets the total number of lines in the the document (includes lines not visible in the viewport)</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!number</dd>
    <dd></dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.lineCount = function () {
        return this._codeMirror.lineCount();
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>posWithinRange</h4>

    
    <div class="description"><p>Returns true if pos is between start and end (INclusive at start; EXclusive at end by default,
but overridable via the endInclusive flag).</p>
</div>
    
<dl>
    <dt>pos</dt>
    <dd class="label label-info pull-left">{line:number,ch:number}</dd>
    <dd></dd>
    <dt>start</dt>
    <dd class="label label-info pull-left">{line:number,ch:number}</dd>
    <dd></dd>
    <dt>end</dt>
    <dd class="label label-info pull-left">{line:number,ch:number}</dd>
    <dd></dd>
    <dt>endInclusive</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.posWithinRange = function (pos, start, end, endInclusive) {
        if (start.line &lt;= pos.line &amp;&amp; end.line &gt;= pos.line) {
            if (endInclusive) {
                return (start.line &lt; pos.line || start.ch &lt;= pos.ch) &amp;&amp;  &#x2F;&#x2F; inclusive
                    (end.line &gt; pos.line   || end.ch &gt;= pos.ch);      &#x2F;&#x2F; inclusive
            } else {
                return (start.line &lt; pos.line || start.ch &lt;= pos.ch) &amp;&amp;  &#x2F;&#x2F; inclusive
                    (end.line &gt; pos.line   || end.ch &gt; pos.ch);       &#x2F;&#x2F; exclusive
            }
                   
        }
        return false;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>redo</h4>

    
    <div class="description"><p>Redo the last un-done edit.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.redo = function () {
        this._codeMirror.redo();
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>refresh</h4>

    
    <div class="description"><p>Re-renders the editor UI</p>
</div>
    
<dl>
    <dt>handleResize</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true if this is in response to resizing the editor. Default false.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.refresh = function (handleResize) {
        &#x2F;&#x2F; If focus is currently in a child of the CodeMirror editor (e.g. in an inline widget), but not in
        &#x2F;&#x2F; the CodeMirror input field itself, remember the focused item so we can restore focus after the
        &#x2F;&#x2F; refresh (which might cause the widget to be removed from the display list temporarily).
        var focusedItem = window.document.activeElement,
            restoreFocus = $.contains(this._codeMirror.getScrollerElement(), focusedItem);
        this._codeMirror.refresh();
        if (restoreFocus) {
            focusedItem.focus();
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>refreshAll</h4>

    
    <div class="description"><p>Re-renders the editor, and all children inline editors.</p>
</div>
    
<dl>
    <dt>handleResize</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true if this is in response to resizing the editor. Default false.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.refreshAll = function (handleResize) {
        this.refresh(handleResize);
        this.getInlineWidgets().forEach(function (inlineWidget) {
            inlineWidget.refresh();
        });
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>removeAllInlineWidgets</h4>

    
    <div class="description"><p>Removes all inline widgets</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.removeAllInlineWidgets = function () {
        &#x2F;&#x2F; copy the array because _removeInlineWidgetInternal will modify the original
        var widgets = [].concat(this.getInlineWidgets());
        
        return Async.doInParallel(
            widgets,
            this.removeInlineWidget.bind(this)
        );
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>removeAllInlineWidgetsForLine</h4>

    
    <div class="description"><p>Removes all inline widgets for a given line</p>
</div>
    
<dl>
    <dt>lineNum</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>The line number to modify</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.removeAllInlineWidgetsForLine = function (lineNum) {
        var lineInfo = this._codeMirror.lineInfo(lineNum),
            widgetInfos = (lineInfo &amp;&amp; lineInfo.widgets) ? [].concat(lineInfo.widgets) : null,
            self = this;
        
        if (widgetInfos &amp;&amp; widgetInfos.length) {
            &#x2F;&#x2F; Map from CodeMirror LineWidget to Brackets InlineWidget
            var inlineWidget,
                allWidgetInfos = this._inlineWidgets.map(function (w) {
                    return w.info;
                });

            return Async.doInParallel(
                widgetInfos,
                function (info) {
                    &#x2F;&#x2F; Lookup the InlineWidget object using the same index
                    inlineWidget = self._inlineWidgets[allWidgetInfos.indexOf(info)];
                    if (inlineWidget) {
                        return self.removeInlineWidget(inlineWidget);
                    } else {
                        return new $.Deferred().resolve().promise();
                    }
                }
            );
        } else {
            return new $.Deferred().resolve().promise();
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>removeInlineWidget</h4>

    
    <div class="description"><p>Removes the given inline widget.</p>
</div>
    
<dl>
    <dt>inlineWidget</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>The widget to remove.</dd>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">$.Promise</dd>
    <dd>A promise that is resolved when the inline widget is fully closed and removed from the DOM.</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.removeInlineWidget = function (inlineWidget) {
        var deferred = new $.Deferred(),
            self = this;

        function finishRemoving() {
            self._codeMirror.removeLineWidget(inlineWidget.info);
            self._removeInlineWidgetInternal(inlineWidget);
            deferred.resolve();
        }
            
        if (!inlineWidget.closePromise) {
            var lineNum = this._getInlineWidgetLineNumber(inlineWidget);
            
            &#x2F;&#x2F; Remove the inline widget from our internal list immediately, so
            &#x2F;&#x2F; everyone external to us knows it&#39;s essentially already gone. We
            &#x2F;&#x2F; don&#39;t want to wait until it&#39;s done animating closed (but we do want
            &#x2F;&#x2F; the other stuff in _removeInlineWidgetInternal to wait until then).
            self._removeInlineWidgetFromList(inlineWidget);
            
            &#x2F;&#x2F; If we&#39;re not visible (in which case the widget will have 0 client height),
            &#x2F;&#x2F; don&#39;t try to do the animation, because nothing will happen and we won&#39;t get
            &#x2F;&#x2F; called back right away. (The animation would happen later when we switch
            &#x2F;&#x2F; back to the editor.)
            if (self.isFullyVisible()) {
                AnimationUtils.animateUsingClass(inlineWidget.htmlContent, &quot;animating&quot;)
                    .done(finishRemoving);
                inlineWidget.$htmlContent.height(0);
            } else {
                finishRemoving();
            }
            inlineWidget.closePromise = deferred.promise();
        }
        return inlineWidget.closePromise;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>selectAllNoScroll</h4>

    
    <div class="description"><p>Selects all text and maintains the current scroll position.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.selectAllNoScroll = function () {
        var cm = this._codeMirror,
            info = this._codeMirror.getScrollInfo();
        
        &#x2F;&#x2F; Note that we do not have to check for the visible range here. This
        &#x2F;&#x2F; concern is handled internally by code mirror.
        cm.operation(function () {
            cm.scrollTo(info.left, info.top);
            cm.execCommand(&quot;selectAll&quot;);
        });
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>selectWordAt</h4>

    
    <div class="description"><p>Selects word that the given pos lies within or adjacent to. If pos isn&#39;t touching a word
(e.g. within a token like &quot;//&quot;), moves the cursor to pos without selecting a range.
Adapted from selectWordAt() in CodeMirror v2.</p>
</div>
    
<dl>
    <dt></dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line:number, ch:number}</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.selectWordAt = function (pos) {
        var line = this.document.getLine(pos.line),
            start = pos.ch,
            end = pos.ch;
        
        function isWordChar(ch) {
            return (&#x2F;\w&#x2F;).test(ch) || ch.toUpperCase() !== ch.toLowerCase();
        }
        
        while (start &gt; 0 &amp;&amp; isWordChar(line.charAt(start - 1))) {
            --start;
        }
        while (end &lt; line.length &amp;&amp; isWordChar(line.charAt(end))) {
            ++end;
        }
        this.setSelection({line: pos.line, ch: start}, {line: pos.line, ch: end});
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>setCursorPos</h4>

    
    <div class="description"><p>Sets the cursor position within the editor. Removes any selection.</p>
</div>
    
<dl>
    <dt>line</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>The 0 based line number.</dd>
    <dt>ch</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>The 0 based character position; treated as 0 if unspecified.</dd>
    <dt>center</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>True if the view should be centered on the new cursor position.</dd>
    <dt>expandTabs</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>If true, use the actual visual column number instead of the character offset as the "ch" parameter.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.setCursorPos = function (line, ch, center, expandTabs) {
        if (expandTabs) {
            ch = this.getColOffset({line: line, ch: ch});
        }
        this._codeMirror.setCursor(line, ch);
        if (center) {
            this.centerOnCursor();
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>setInlineWidgetHeight</h4>

    
    <div class="description"><p>Sets the height of an inline widget in this editor.</p>
</div>
    
<dl>
    <dt>inlineWidget</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">InlineWidget</dd>
    <dd>The widget whose height should be set.</dd>
    <dt>height</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">number</dd>
    <dd>The height of the widget.</dd>
    <dt>ensureVisible</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>Whether to scroll the entire widget into view.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.setInlineWidgetHeight = function (inlineWidget, height, ensureVisible) {
        var self = this,
            node = inlineWidget.htmlContent,
            oldHeight = (node &amp;&amp; $(node).height()) || 0,
            changed = (oldHeight !== height),
            isAttached = inlineWidget.info !== undefined;

        function updateHeight() {
            &#x2F;&#x2F; Notify CodeMirror for the height change.
            if (isAttached) {
                inlineWidget.info.changed();
            }
        }
        
        function setOuterHeight() {
            function finishAnimating(e) {
                if (e.target === node) {
                    updateHeight();
                    $(node).off(&quot;webkitTransitionEnd&quot;, finishAnimating);
                }
            }
            $(node).height(height);
            if ($(node).hasClass(&quot;animating&quot;)) {
                $(node).on(&quot;webkitTransitionEnd&quot;, finishAnimating);
            } else {
                updateHeight();
            }
        }

        &#x2F;&#x2F; Make sure we set an explicit height on the widget, so children can use things like
        &#x2F;&#x2F; min-height if they want.
        if (changed || !node.style.height) {
            &#x2F;&#x2F; If we&#39;re animating, set the wrapper&#39;s height on a timeout so the layout is finished before we animate.
            if ($(node).hasClass(&quot;animating&quot;)) {
                window.setTimeout(setOuterHeight, 0);
            } else {
                setOuterHeight();
            }
        }

        if (ensureVisible &amp;&amp; isAttached) {
            var offset = $(node).offset(), &#x2F;&#x2F; offset relative to document
                position = $(node).position(), &#x2F;&#x2F; position within parent linespace
                scrollerTop = self.getVirtualScrollAreaTop();

            self._codeMirror.scrollIntoView({
                left: position.left,
                top: offset.top - scrollerTop,
                right: position.left, &#x2F;&#x2F; don&#39;t try to make the right edge visible
                bottom: offset.top + height - scrollerTop
            });
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>setScrollPos</h4>

    
    <div class="description"><p>Sets the current scroll position of the editor.</p>
</div>
    
<dl>
    <dt>x</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>scrollLeft position in pixels</dd>
    <dt>y</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>scrollTop position in pixels</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.setScrollPos = function (x, y) {
        this._codeMirror.scrollTo(x, y);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>setSelection</h4>

    
    <div class="description"><p>Sets the current selection. Start is inclusive, end is exclusive. Places the cursor at the
end of the selection range. Optionally centers around the cursor after
making the selection</p>
</div>
    
<dl>
    <dt>start</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">{line:number, ch:number}</dd>
    <dd></dd>
    <dt>end</dt>
    <span class="label label-optional pull-left">optional</span>
    <dd class="label label-info pull-left">{line:number, ch:number}</dd>
    <dd>If not specified, defaults to start.</dd>
    <dt>center</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true to center the viewport</dd>
    <dt>centerOptions</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Option value, or 0 for no options; one of the BOUNDARY_* constants above.</dd>
    <dt>origin</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>An optional string that describes what other selection or edit operations this should be merged with for the purposes of undo. See Document.replaceRange() for more details.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.setSelection = function (start, end, center, centerOptions, origin) {
        this.setSelections([{start: start, end: end || start}], center, centerOptions, origin);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>setSelections</h4>

    
    <div class="description"><p>Sets a multiple selection, with the &quot;primary&quot; selection (the one returned by
getSelection() and getCursorPos()) defaulting to the last if not specified.
Overlapping ranges will be automatically merged, and the selection will be sorted.
Optionally centers around the primary selection after making the selection.</p>
</div>
    
<dl>
    <dt>selections</dt>
    <span class="label label-non-nullable pull-left">non-nullable</span>
    <dd class="label label-info pull-left">Array&lt;{start:{line:number, ch:number}, end:{line:number, ch:number}, primary:boolean, reversed: boolean}&gt;</dd>
    <dd>The selection ranges to set. If the start and end of a range are the same, treated as a cursor. If reversed is true, set the anchor of the range to the end instead of the start. If primary is true, this is the primary selection. Behavior is undefined if more than one selection has primary set to true. If none has primary set to true, the last one is primary.</dd>
    <dt>center</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true to center the viewport around the primary selection.</dd>
    <dt>centerOptions</dt>
    <dd class="label label-info pull-left">number</dd>
    <dd>Option value, or 0 for no options; one of the BOUNDARY_* constants above.</dd>
    <dt>origin</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">string</dd>
    <dd>An optional string that describes what other selection or edit operations this should be merged with for the purposes of undo. See Document.replaceRange() for more details.</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.setSelections = function (selections, center, centerOptions, origin) {
        var primIndex = selections.length - 1, options;
        if (origin) {
            options = { origin: origin };
        }
        this._codeMirror.setSelections(_.map(selections, function (sel, index) {
            if (sel.primary) {
                primIndex = index;
            }
            return { anchor: sel.reversed ? sel.end : sel.start, head: sel.reversed ? sel.start : sel.end };
        }), primIndex, options);
        if (center) {
            this.centerOnCursor(centerOptions);
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>setSize</h4>

    
    <div class="description"><p>Set the editor size in pixels or percentage</p>
</div>
    
<dl>
    <dt>width</dt>
    <dd class="label label-info pull-left">(number,string)</dd>
    <dd></dd>
    <dt>height</dt>
    <dd class="label label-info pull-left">(number,string)</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.setSize = function (width, height) {
        this._codeMirror.setSize(width, height);
    };
    
    var CENTERING_MARGIN = 0.15;</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>setVisible</h4>

    
    <div class="description"><p>Shows or hides the editor within its parent. Does not force its ancestors to
become visible.</p>
</div>
    
<dl>
    <dt>show</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true to show the editor, false to hide it</dd>
    <dt>refresh</dt>
    <dd class="label label-info pull-left">boolean</dd>
    <dd>true (default) to refresh the editor, false to skip refreshing it</dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.setVisible = function (show, refresh) {
        $(this.getRootElement()).css(&quot;display&quot;, (show ? &quot;&quot; : &quot;none&quot;));
        if (show &amp;&amp; (refresh || refresh === undefined)) {
            this.refresh();
        }
        if (show) {
            this._inlineWidgets.forEach(function (inlineWidget) {
                inlineWidget.onParentShown();
            });
        }
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>toggleOverwrite</h4>

    
    <div class="description"><p>Sets the editors overwrite mode state. If null is passed, the state is toggled.</p>
</div>
    
<dl>
    <dt>start</dt>
    <span class="label label-nullable pull-left">nullable</span>
    <dd class="label label-info pull-left">boolean</dd>
    <dd></dd>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.toggleOverwrite = function (state) {
        this._codeMirror.toggleOverwrite(state);
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>totalHeight</h4>

    
    <div class="description"><p>Gets the total height of the document in pixels (not the viewport)</p>
</div>
    
<dl>
</dl><dl>
    <dt>Returns: </dt>
    <dd class="label label-info pull-left">!number</dd>
    <dd>height in pixels</dd>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.totalHeight = function () {
        return this.getScrollerElement().scrollHeight;
    };</code></pre></div><div class="member">

<span class="pull-right scope">
    
    
</span>
    <h4>undo</h4>

    
    <div class="description"><p>Undo the last edit.</p>
</div>
    
<dl>
</dl><dl>
</dl><button class="btn btn-small show-code">Show code</button>
<pre class="code language-javascript"><code class="language-javascript">    Editor.prototype.undo = function () {
        this._codeMirror.undo();
    };</code></pre></div>
        </section>

    </div>

</section>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../assets/js/prism.js"></script>
  </body>
</html>